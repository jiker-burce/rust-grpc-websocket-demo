import{aB as y,r as x,l as V,al as r,z as k,A as B,B as l,R as o,J as t,W as L,O as m,a5 as R,u as z}from"./vendor-0413c596.js";import{u as h}from"./index-18f1411d.js";import{_ as C}from"./_plugin-vue_export-helper-c27b6911.js";import{a as _}from"./element-a74229b3.js";const F={class:"login-container"},M={class:"login-box"},N={class:"login-footer"},S={__name:"Login",setup(U){const c=y(),d=h(),a=x(),s=V({email:"",password:""}),f={email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}]},n=async()=>{a.value&&await a.value.validate(async p=>{if(p){console.log("开始登录...");const e=await d.login(s.email,s.password);console.log("登录结果:",e),e.success?(_.success(e.message),console.log("准备跳转到聊天页面..."),await c.push("/chat"),console.log("跳转完成")):_.error(e.message)}})};return(p,e)=>{const g=r("el-input"),i=r("el-form-item"),w=r("el-button"),v=r("el-form"),b=r("router-link");return k(),B("div",F,[l("div",M,[e[5]||(e[5]=l("div",{class:"login-header"},[l("h1",null,"实时聊天系统"),l("p",null,"欢迎回来，请登录您的账户")],-1)),o(v,{ref_key:"loginFormRef",ref:a,model:s,rules:f,class:"login-form",onSubmit:L(n,["prevent"])},{default:t(()=>[o(i,{prop:"email"},{default:t(()=>[o(g,{modelValue:s.email,"onUpdate:modelValue":e[0]||(e[0]=u=>s.email=u),placeholder:"请输入邮箱",size:"large","prefix-icon":"Message"},null,8,["modelValue"])]),_:1}),o(i,{prop:"password"},{default:t(()=>[o(g,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=u=>s.password=u),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":"Lock","show-password":"",onKeyup:R(n,["enter"])},null,8,["modelValue"])]),_:1}),o(i,null,{default:t(()=>[o(w,{type:"primary",size:"large",class:"login-button",loading:z(d).loading,onClick:n},{default:t(()=>[...e[2]||(e[2]=[m(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),l("div",N,[l("p",null,[e[4]||(e[4]=m(" 还没有账户？ ",-1)),o(b,{to:"/register",class:"register-link"},{default:t(()=>[...e[3]||(e[3]=[m(" 立即注册 ",-1)])]),_:1})])])])])}}},I=C(S,[["__scopeId","data-v-0b2afa1e"]]);export{I as default};
