import{aB as V,r as x,l as y,al as n,z as R,A as k,B as a,R as s,J as o,W as P,O as p,a5 as z,u as U}from"./vendor-0413c596.js";import{u as B}from"./index-18f1411d.js";import{_ as C}from"./_plugin-vue_export-helper-c27b6911.js";import{a as f}from"./element-a74229b3.js";const q={class:"register-container"},E={class:"register-box"},F={class:"register-footer"},M={__name:"Register",setup(N){const _=V(),g=B(),u=x(),r=y({username:"",email:"",password:"",confirmPassword:""}),c={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:20,message:"用户名长度在2到20个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(m,e,t)=>{e!==r.password?t(new Error("两次输入的密码不一致")):t()},trigger:"blur"}]},d=async()=>{u.value&&await u.value.validate(async m=>{if(m){const e=await g.register(r.username,r.email,r.password);e.success?(f.success(e.message),_.push("/login")):f.error(e.message)}})};return(m,e)=>{const t=n("el-input"),i=n("el-form-item"),w=n("el-button"),b=n("el-form"),v=n("router-link");return R(),k("div",q,[a("div",E,[e[7]||(e[7]=a("div",{class:"register-header"},[a("h1",null,"创建账户"),a("p",null,"加入我们的聊天社区")],-1)),s(b,{ref_key:"registerFormRef",ref:u,model:r,rules:c,class:"register-form",onSubmit:P(d,["prevent"])},{default:o(()=>[s(i,{prop:"username"},{default:o(()=>[s(t,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=l=>r.username=l),placeholder:"请输入用户名",size:"large","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),s(i,{prop:"email"},{default:o(()=>[s(t,{modelValue:r.email,"onUpdate:modelValue":e[1]||(e[1]=l=>r.email=l),placeholder:"请输入邮箱",size:"large","prefix-icon":"Message"},null,8,["modelValue"])]),_:1}),s(i,{prop:"password"},{default:o(()=>[s(t,{modelValue:r.password,"onUpdate:modelValue":e[2]||(e[2]=l=>r.password=l),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),s(i,{prop:"confirmPassword"},{default:o(()=>[s(t,{modelValue:r.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=l=>r.confirmPassword=l),type:"password",placeholder:"请确认密码",size:"large","prefix-icon":"Lock","show-password":"",onKeyup:z(d,["enter"])},null,8,["modelValue"])]),_:1}),s(i,null,{default:o(()=>[s(w,{type:"primary",size:"large",class:"register-button",loading:U(g).loading,onClick:d},{default:o(()=>[...e[4]||(e[4]=[p(" 注册 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),a("div",F,[a("p",null,[e[6]||(e[6]=p(" 已有账户？ ",-1)),s(v,{to:"/login",class:"login-link"},{default:o(()=>[...e[5]||(e[5]=[p(" 立即登录 ",-1)])]),_:1})])])])])}}},I=C(M,[["__scopeId","data-v-b38bceef"]]);export{I as default};
