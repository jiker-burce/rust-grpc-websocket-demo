import{ax as Be,r as F,c as jt,m as kt,al as Nt,z as xt,A as Jt,R as Xt,ay as $t,az as Yt,au as Ht,aA as Kt}from"./vendor-0413c596.js";import{c as Vt,d as ue,E as Zt,i as Qt}from"./element-a74229b3.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();/*! Element Plus v2.11.2 */var er={name:"zh-cn",el:{breadcrumb:{label:"面包屑"},colorpicker:{confirm:"确定",clear:"清空",defaultLabel:"颜色选择器",description:"当前颜色 {color}，按 Enter 键选择新颜色",alphaLabel:"选择透明度的值"},datepicker:{now:"此刻",today:"今天",cancel:"取消",clear:"清空",confirm:"确定",dateTablePrompt:"使用方向键与 Enter 键可选择日期",monthTablePrompt:"使用方向键与 Enter 键可选择月份",yearTablePrompt:"使用方向键与 Enter 键可选择年份",selectedDate:"已选日期",selectDate:"选择日期",selectTime:"选择时间",startDate:"开始日期",startTime:"开始时间",endDate:"结束日期",endTime:"结束时间",prevYear:"前一年",nextYear:"后一年",prevMonth:"上个月",nextMonth:"下个月",year:"年",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},weeksFull:{sun:"星期日",mon:"星期一",tue:"星期二",wed:"星期三",thu:"星期四",fri:"星期五",sat:"星期六"},months:{jan:"一月",feb:"二月",mar:"三月",apr:"四月",may:"五月",jun:"六月",jul:"七月",aug:"八月",sep:"九月",oct:"十月",nov:"十一月",dec:"十二月"}},inputNumber:{decrease:"减少数值",increase:"增加数值"},select:{loading:"加载中",noMatch:"无匹配数据",noData:"无数据",placeholder:"请选择"},dropdown:{toggleDropdown:"切换下拉选项"},mention:{loading:"加载中"},cascader:{noMatch:"无匹配数据",loading:"加载中",placeholder:"请选择",noData:"暂无数据"},pagination:{goto:"前往",pagesize:"条/页",total:"共 {total} 条",pageClassifier:"页",page:"页",prev:"上一页",next:"下一页",currentPage:"第 {pager} 页",prevPages:"向前 {pager} 页",nextPages:"向后 {pager} 页",deprecationWarning:"你使用了一些已被废弃的用法，请参考 el-pagination 的官方文档"},dialog:{close:"关闭此对话框"},drawer:{close:"关闭此对话框"},messagebox:{title:"提示",confirm:"确定",cancel:"取消",error:"输入的数据不合法!",close:"关闭此对话框"},upload:{deleteTip:"按 Delete 键可删除",delete:"删除",preview:"查看图片",continue:"继续上传"},slider:{defaultLabel:"滑块介于 {min} 至 {max}",defaultRangeStartLabel:"选择起始值",defaultRangeEndLabel:"选择结束值"},table:{emptyText:"暂无数据",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},tour:{next:"下一步",previous:"上一步",finish:"结束导览",close:"关闭此对话框"},tree:{emptyText:"暂无数据"},transfer:{noMatch:"无匹配数据",noData:"无数据",titles:["列表 1","列表 2"],filterPlaceholder:"请输入搜索内容",noCheckedFormat:"共 {total} 项",hasCheckedFormat:"已选 {checked}/{total} 项"},image:{error:"加载失败"},pageHeader:{title:"返回"},popconfirm:{confirmButtonText:"确定",cancelButtonText:"取消"},carousel:{leftArrow:"上一张幻灯片",rightArrow:"下一张幻灯片",indicator:"幻灯片切换至索引 {index}"}}},C,Se=Se||{},M=Vt||self;function k(e,t){e=e.split("."),t=t||M;for(var r=0;r<e.length;r++)if(t=t[e[r]],t==null)return null;return t}function se(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function tr(e){return Object.prototype.hasOwnProperty.call(e,ce)&&e[ce]||(e[ce]=++rr)}var ce="closure_uid_"+(Math.random()*1e9>>>0),rr=0;function sr(e,t,r){return e.call.apply(e.bind,arguments)}function or(e,t,r){if(!e)throw Error();if(arguments.length>2){var s=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,s),e.apply(t,o)}}return function(){return e.apply(t,arguments)}}function z(e,t,r){return z=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?sr:or,z.apply(null,arguments)}function j(e,t){function r(){}r.prototype=t.prototype,e.N=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.aa=function(s,o,i){for(var a=Array(arguments.length-2),u=2;u<arguments.length;u++)a[u-2]=arguments[u];return t.prototype[o].apply(s,a)}}class nr{constructor(t){this.g=t||{}}get(t){return this.g[t]}}class ir{constructor(t,r,s){var o=new nr;this.j=t,this.h=r,this.g=s,this.i=o}getRequestMessage(){return this.j}getMethodDescriptor(){return this.h}getMetadata(){return this.g}getCallOptions(){return this.i}}class ar{constructor(t,r,s={},o=null){this.i=t,this.g=s,this.h=r,this.j=o}getResponseMessage(){return this.i}getMetadata(){return this.g}getMethodDescriptor(){return this.h}getStatus(){return this.j}}function ge(e,t,r={}){return new ir(t,e,r)}function ur(e,t,r={},s=null){return new ar(t,e,r,s)}const de=class{constructor(e,t,r,s,o,i){this.name=e,this.g=o,this.h=i}getName(){return this.name}};de.prototype.getName=de.prototype.getName;class cr{constructor(t){this.g=t}on(t,r){return t=="data"||t=="error"?this:this.g.on(t,r)}removeListener(t,r){return this.g.removeListener(t,r)}cancel(){this.g.cancel()}}function lr(e){switch(e){case 0:return"No Error";case 1:return"Access denied to content document";case 2:return"File not found";case 3:return"Firefox silently errored";case 4:return"Application custom error";case 5:return"An exception occurred";case 6:return"Http response at 400 or 500 level";case 7:return"Request was aborted";case 8:return"Request timed out";case 9:return"The resource is not available offline";default:return"Unrecognized error code"}}function Y(e,t){if(Error.captureStackTrace)Error.captureStackTrace(this,Y);else{const r=Error().stack;r&&(this.stack=r)}e&&(this.message=String(e)),t!==void 0&&(this.cause=t)}j(Y,Error);Y.prototype.name="CustomError";function we(e,t){e=e.split("%s");let r="";const s=e.length-1;for(let o=0;o<s;o++)r+=e[o]+(o<t.length?t[o]:"%s");Y.call(this,r+e[s])}j(we,Y);we.prototype.name="AssertionError";function pr(e,t){throw new we("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function hr(e,t){function r(h){h==Re||h==X?a.o=h:We(a,u,c,"invalid frame byte"),a.h=Le,a.g=0,a.l=0}function s(h){a.l++,a.g=(a.g<<8)+h,a.l==4&&(a.h=Ge,a.m=0,typeof Uint8Array<"u"?a.i=new Uint8Array(a.g):a.i=Array(a.g),a.g==0&&i())}function o(h){a.i[a.m++]=h,a.m==a.g&&i()}function i(){var h={};h[a.o]=a.i,a.j.push(h),a.h=fe}var a=e,u,c=0;for(t instanceof Uint8Array||t instanceof Array?u=t:u=new Uint8Array(t);c<u.length;){switch(a.h){case nt:We(a,u,c,"stream already broken");break;case fe:r(u[c]);break;case Le:s(u[c]);break;case Ge:o(u[c]);break;default:throw Error("unexpected parser state: "+a.h)}a.v++,c++}return e=a.j,a.j=[],e.length>0?e:null}class gr{constructor(){this.u=null,this.j=[],this.v=0,this.h=fe,this.l=this.g=this.o=0,this.i=null,this.m=0}}var fe=0,Le=1,Ge=2,nt=3,Re=0,X=128;function We(e,t,r,s){throw e.h=nt,e.u="The stream is broken @"+e.v+"/"+r+". Error: "+s+`. With input:
`+t,Error(e.u)}function dr(e){switch(e){case 200:return 0;case 400:return 3;case 401:return 16;case 403:return 7;case 404:return 5;case 409:return 10;case 412:return 9;case 429:return 8;case 499:return 1;case 500:return 2;case 501:return 12;case 503:return 14;case 504:return 4;default:return 2}}function fr(e){switch(e){case 0:return"OK";case 1:return"CANCELLED";case 2:return"UNKNOWN";case 3:return"INVALID_ARGUMENT";case 4:return"DEADLINE_EXCEEDED";case 5:return"NOT_FOUND";case 6:return"ALREADY_EXISTS";case 7:return"PERMISSION_DENIED";case 16:return"UNAUTHENTICATED";case 8:return"RESOURCE_EXHAUSTED";case 9:return"FAILED_PRECONDITION";case 10:return"ABORTED";case 11:return"OUT_OF_RANGE";case 12:return"UNIMPLEMENTED";case 13:return"INTERNAL";case 14:return"UNAVAILABLE";case 15:return"DATA_LOSS";default:return""}}class E extends Error{constructor(t,r,s={}){super(r),this.code=t,this.metadata=s}toString(){let t=`RpcError(${fr(this.code)||String(this.code)})`;return this.message&&(t+=": "+this.message),t}}E.prototype.name="RpcError";const it=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let r=0;r<e.length;r++)if(r in e&&e[r]===t)return r;return-1};function at(){var e=M.navigator;return e&&(e=e.userAgent)?e:""}function O(e){return at().indexOf(e)!=-1}function De(e){return De[" "](e),e}De[" "]=function(){};var Rr=O("Trident")||O("MSIE"),yr=O("Gecko")&&!(at().toLowerCase().indexOf("webkit")!=-1&&!O("Edge"))&&!(O("Trident")||O("MSIE"))&&!O("Edge"),ut=class{constructor(e){if(_e!==_e)throw Error("SafeUrl is not meant to be built directly");this.g=e}toString(){return this.g.toString()}},_e={};new ut("about:invalid#zClosurez");new ut("about:blank");const Ae={};class mr{constructor(){if(Ae!==Ae)throw Error("SafeStyle is not meant to be built directly")}toString(){return"".toString()}}new mr;function vr(e,t){for(const r in e)t.call(void 0,e[r],r,e)}function Mr(e,t){const r={};for(const s in e)r[s]=t.call(void 0,e[s],s,e);return r}const ze="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ur(e,t){let r,s;for(let o=1;o<arguments.length;o++){s=arguments[o];for(r in s)e[r]=s[r];for(let i=0;i<ze.length;i++)r=ze[i],Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}}const Pe={};class Er{constructor(){if(Pe!==Pe)throw Error("SafeStyleSheet is not meant to be built directly")}toString(){return"".toString()}}new Er;const je={};class Fr{constructor(){var t=M.trustedTypes&&M.trustedTypes.emptyHTML||"";if(je!==je)throw Error("SafeHtml is not meant to be built directly");this.g=t}toString(){return this.g.toString()}}new Fr;function Br(e){var t=1;e=e.split(":");const r=[];for(;t>0&&e.length;)r.push(e.shift()),t--;return e.length&&r.push(e.join(":")),r}function H(){this.v=this.v,this.o=this.o}var Sr=0;H.prototype.v=!1;H.prototype.dispose=function(){!this.v&&(this.v=!0,this.C(),Sr!=0)&&tr(this)};H.prototype.C=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var wr=Object.freeze||function(e){return e};function A(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var Dr=function(){if(!M.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const r=()=>{};M.addEventListener("test",r,t),M.removeEventListener("test",r,t)}catch{}return e}();function P(e,t){A.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}j(P,A);var br=wr({2:"touch",3:"pen",4:"mouse"});P.prototype.init=function(e,t){var r=this.type=e.type,s=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(yr){e:{try{De(t.nodeName);var o=!0;break e}catch{}o=!1}o||(t=null)}}else r=="mouseover"?t=e.fromElement:r=="mouseout"&&(t=e.toElement);this.relatedTarget=t,s?(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:br[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&P.N.h.call(this)};P.prototype.h=function(){P.N.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var K="closure_listenable_"+(Math.random()*1e6|0),Cr=0;function Or(e,t,r,s,o){this.listener=e,this.proxy=null,this.src=t,this.type=r,this.capture=!!s,this.M=o,this.key=++Cr,this.D=this.L=!1}function oe(e){e.D=!0,e.listener=null,e.proxy=null,e.src=null,e.M=null}function ne(e){this.src=e,this.g={},this.h=0}ne.prototype.add=function(e,t,r,s,o){var i=e.toString();e=this.g[i],e||(e=this.g[i]=[],this.h++);var a=me(e,t,s,o);return a>-1?(t=e[a],r||(t.L=!1)):(t=new Or(t,this.src,i,!!s,o),t.L=r,e.push(t)),t};function ye(e,t){var r=t.type;if(r in e.g){var s=e.g[r],o=it(s,t),i;(i=o>=0)&&Array.prototype.splice.call(s,o,1),i&&(oe(t),e.g[r].length==0&&(delete e.g[r],e.h--))}}function me(e,t,r,s){for(var o=0;o<e.length;++o){var i=e[o];if(!i.D&&i.listener==t&&i.capture==!!r&&i.M==s)return o}return-1}var be="closure_lm_"+(Math.random()*1e6|0),le={};function ve(e,t,r,s,o){if(s&&s.once)lt(e,t,r,s,o);else if(Array.isArray(t))for(var i=0;i<t.length;i++)ve(e,t[i],r,s,o);else r=Oe(r),e&&e[K]?e.j.add(String(t),r,!1,se(s)?!!s.capture:!!s,o):ct(e,t,r,!1,s,o)}function ct(e,t,r,s,o,i){if(!t)throw Error("Invalid event type");var a=se(o)?!!o.capture:!!o,u=Ce(e);if(u||(e[be]=u=new ne(e)),r=u.add(t,r,s,a,i),!r.proxy)if(s=Tr(),r.proxy=s,s.src=e,s.listener=r,e.addEventListener)Dr||(o=a),o===void 0&&(o=!1),e.addEventListener(t.toString(),s,o);else if(e.attachEvent)e.attachEvent(gt(t.toString()),s);else if(e.addListener&&e.removeListener)e.addListener(s);else throw Error("addEventListener and attachEvent are unavailable.")}function Tr(){function e(r){return t.call(e.src,e.listener,r)}const t=Ir;return e}function lt(e,t,r,s,o){if(Array.isArray(t))for(var i=0;i<t.length;i++)lt(e,t[i],r,s,o);else r=Oe(r),e&&e[K]?e.j.add(String(t),r,!0,se(s)?!!s.capture:!!s,o):ct(e,t,r,!0,s,o)}function pt(e,t,r,s,o){if(Array.isArray(t))for(var i=0;i<t.length;i++)pt(e,t[i],r,s,o);else s=se(s)?!!s.capture:!!s,r=Oe(r),e&&e[K]?(e=e.j,t=String(t).toString(),t in e.g&&(i=e.g[t],r=me(i,r,s,o),r>-1&&(oe(i[r]),Array.prototype.splice.call(i,r,1),i.length==0&&(delete e.g[t],e.h--)))):e&&(e=Ce(e))&&(t=e.g[t.toString()],e=-1,t&&(e=me(t,r,s,o)),(r=e>-1?t[e]:null)&&ht(r))}function ht(e){if(typeof e!="number"&&e&&!e.D){var t=e.src;if(t&&t[K])ye(t.j,e);else{var r=e.type,s=e.proxy;t.removeEventListener?t.removeEventListener(r,s,e.capture):t.detachEvent?t.detachEvent(gt(r),s):t.addListener&&t.removeListener&&t.removeListener(s),(r=Ce(t))?(ye(r,e),r.h==0&&(r.src=null,t[be]=null)):oe(e)}}}function gt(e){return e in le?le[e]:le[e]="on"+e}function Ir(e,t){if(e.D)e=!0;else{t=new P(t,this);var r=e.listener,s=e.M||e.src;e.L&&ht(e),e=r.call(s,t)}return e}function Ce(e){return e=e[be],e instanceof ne?e:null}var pe="__closure_events_fn_"+(Math.random()*1e9>>>0);function Oe(e){return typeof e=="function"?e:(e[pe]||(e[pe]=function(t){return e.handleEvent(t)}),e[pe])}function T(){H.call(this),this.j=new ne(this),this.W=this,this.S=null}j(T,H);T.prototype[K]=!0;T.prototype.removeEventListener=function(e,t,r,s){pt(this,e,t,r,s)};function D(e,t){var r,s=e.S;if(s)for(r=[];s;s=s.S)r.push(s);if(e=e.W,s=t.type||t,typeof t=="string")t=new A(t,e);else if(t instanceof A)t.target=t.target||e;else{var o=t;t=new A(s,e),Ur(t,o)}if(o=!0,r)for(var i=r.length-1;i>=0;i--){var a=t.g=r[i];o=Q(a,s,!0,t)&&o}if(a=t.g=e,o=Q(a,s,!0,t)&&o,o=Q(a,s,!1,t)&&o,r)for(i=0;i<r.length;i++)a=t.g=r[i],o=Q(a,s,!1,t)&&o}T.prototype.C=function(){if(T.N.C.call(this),this.j){var e=this.j,t;for(t in e.g){for(var r=e.g[t],s=0;s<r.length;s++)oe(r[s]);delete e.g[t],e.h--}}this.S=null};function Q(e,t,r,s){if(t=e.j.g[String(t)],!t)return!0;t=t.concat();for(var o=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.D&&a.capture==r){var u=a.listener,c=a.M||a.src;a.L&&ye(e.j,a),o=u.call(c,s)!==!1&&o}}return o&&!s.defaultPrevented}var Te=M;function dt(e,t,r){if(typeof e=="function")r&&(e=z(e,r));else if(e&&typeof e.handleEvent=="function")e=z(e.handleEvent,e);else throw Error("Invalid listener argument");return Number(t)>2147483647?-1:Te.setTimeout(e,t||0)}var ie=class{constructor(e,t){this.name=e,this.value=t}toString(){return this.name}},te=new ie("OFF",1/0),qr=new ie("SEVERE",1e3),Lr=new ie("CONFIG",700),Gr=new ie("FINE",500),Wr=class{constructor(e,t,r){this.reset(e||te,t,r,void 0,void 0)}reset(){}};function ft(e){return e.g?e.g:e.h?ft(e.h):(pr("Root logger has no level set."),te)}function _r(e,t){for(;e;)e.j.forEach(r=>{r(t)}),e=e.h}var Rt=class{constructor(e,t=null){this.g=null,this.j=[],this.h=t||null,this.i=[],this.l={getName:()=>e}}};function re(e,t){var r=e.entries[t];if(r)return r;r=re(e,t.slice(0,Math.max(t.lastIndexOf("."),0)));const s=new Rt(t,r);return e.entries[t]=s,r.i.push(s),s}var Ar=class{constructor(){this.entries={};const e=new Rt("");e.g=Lr,this.entries[""]=e}},ke;function Me(){return ke||(ke=new Ar),ke}function yt(e,t,r){var s;if((s=e)&&(s=e&&t)){s=t.value;var o=e?ft(re(Me(),e.getName())):te;s=s>=o.value}s&&(t=t||te,s=re(Me(),e.getName()),typeof r=="function"&&(r=r()),e=e.getName(),e=new Wr(t,r,e),_r(s,e))}function mt(e,t){e&&yt(e,qr,t)}function U(e,t){e&&yt(e,Gr,t)}function vt(){}vt.prototype.g=null;function Ne(e){var t;return(t=e.g)||(t={},Ut(e)&&(t[0]=!0,t[1]=!0),t=e.g=t),t}var Ue;function Mt(){}j(Mt,vt);function xe(e){return(e=Ut(e))?new ActiveXObject(e):new XMLHttpRequest}function Ut(e){if(!e.h&&typeof XMLHttpRequest>"u"&&typeof ActiveXObject<"u"){const t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"];for(let r=0;r<t.length;r++){const s=t[r];try{return new ActiveXObject(s),e.h=s}catch{}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.h}Ue=new Mt;var zr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function V(e){T.call(this),this.headers=new Map,this.K=e||null,this.i=!1,this.J=this.g=null,this.T=this.G="",this.m=0,this.A="",this.l=this.R=this.F=this.P=!1,this.u=0,this.H=null,this.B=Et,this.I=this.O=!1}j(V,T);var Et="";V.prototype.h=re(Me(),"goog.net.XhrIo").l;var Pr=/^https?$/i,jr=["POST","PUT"];function kr(e,t,r){if(e.g)throw Error("[goog.net.XhrIo] Object is active with another request="+e.G+"; newUri="+t);e.G=t,e.A="",e.m=0,e.T="POST",e.P=!1,e.i=!0,e.g=e.K?xe(e.K):xe(Ue),e.J=e.K?Ne(e.K):Ne(Ue),e.g.onreadystatechange=z(e.U,e);try{U(e.h,B(e,"Opening Xhr")),e.R=!0,e.g.open("POST",String(t),!0),e.R=!1}catch(i){U(e.h,B(e,"Error opening Xhr: "+i.message)),Je(e,i);return}t=r||"",r=new Map(e.headers);const s=Array.from(r.keys()).find(i=>i.toLowerCase()=="content-type"),o=M.FormData&&t instanceof M.FormData;!(it(jr,"POST")>=0)||s||o||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of r)e.g.setRequestHeader(i,a);e.B&&(e.g.responseType=e.B),"withCredentials"in e.g&&e.g.withCredentials!==e.O&&(e.g.withCredentials=e.O);try{St(e),e.u>0&&(e.I=Nr(e.g),U(e.h,B(e,"Will abort after "+e.u+"ms if incomplete, xhr2 "+e.I)),e.I?(e.g.timeout=e.u,e.g.ontimeout=z(e.V,e)):e.H=dt(e.V,e.u,e)),U(e.h,B(e,"Sending request")),e.F=!0,e.g.send(t),e.F=!1}catch(i){U(e.h,B(e,"Send error: "+i.message)),Je(e,i)}}function Nr(e){return Rr&&typeof e.timeout=="number"&&e.ontimeout!==void 0}C=V.prototype;C.V=function(){typeof Se<"u"&&this.g&&(this.A="Timed out after "+this.u+"ms, aborting",this.m=8,U(this.h,B(this,this.A)),D(this,"timeout"),this.abort(8))};function Je(e,t){e.i=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.A=t,e.m=5,Ft(e),ae(e)}function Ft(e){e.P||(e.P=!0,D(e,"complete"),D(e,"error"))}C.abort=function(e){this.g&&this.i&&(U(this.h,B(this,"Aborting")),this.i=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,D(this,"complete"),D(this,"abort"),ae(this))};C.C=function(){this.g&&(this.i&&(this.i=!1,this.l=!0,this.g.abort(),this.l=!1),ae(this,!0)),V.N.C.call(this)};C.U=function(){this.v||(this.R||this.F||this.l?Bt(this):this.X())};C.X=function(){Bt(this)};function Bt(e){if(e.i&&typeof Se<"u"){if(e.J[1]&&W(e)==4&&e.getStatus()==2)U(e.h,B(e,"Local request error detected and ignored"));else if(e.F&&W(e)==4)dt(e.U,0,e);else if(D(e,"readystatechange"),W(e)==4){U(e.h,B(e,"Request complete")),e.i=!1;try{const a=e.getStatus();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var r;if(!(r=t)){var s;if(s=a===0){var o=String(e.G).match(zr)[1]||null;!o&&M.self&&M.self.location&&(o=M.self.location.protocol.slice(0,-1)),s=!Pr.test(o?o.toLowerCase():"")}r=s}if(r)D(e,"complete"),D(e,"success");else{e.m=6;try{var i=W(e)>2?e.g.statusText:""}catch(u){U(e.h,"Can not get status: "+u.message),i=""}e.A=i+" ["+e.getStatus()+"]",Ft(e)}}finally{ae(e)}}}}function ae(e,t){if(e.g){St(e);const r=e.g,s=e.J[0]?()=>{}:null;e.g=null,e.J=null,t||D(e,"ready");try{r.onreadystatechange=s}catch(o){mt(e.h,"Problem encountered resetting onreadystatechange: "+o.message)}}}function St(e){e.g&&e.I&&(e.g.ontimeout=null),e.H&&(Te.clearTimeout(e.H),e.H=null)}C.isActive=function(){return!!this.g};function W(e){return e.g?e.g.readyState:0}C.getStatus=function(){try{return W(this)>2?this.g.status:-1}catch{return-1}};function xr(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.B){case Et:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return mt(e.h,"Response type "+e.B+" is not supported on this browser"),null}catch(t){return U(e.h,"Can not get response: "+t.message),null}}function Jr(e){const t={};e=(e.g&&W(e)>=2&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let s=0;s<e.length;s++){if(/^[\s\xa0]*$/.test(e[s]))continue;var r=Br(e[s]);const o=r[0];if(r=r[1],typeof r!="string")continue;r=r.trim();const i=t[o]||[];t[o]=i,i.push(r)}return Mr(t,function(s){return s.join(", ")})}function B(e,t){return t+" ["+e.T+" "+e.G+" "+e.getStatus()+"]"}var wt={},$=null;function Xr(e){var t=e.length,r=t*3/4;r%3?r=Math.floor(r):"=.".indexOf(e[t-1])!=-1&&(r="=.".indexOf(e[t-2])!=-1?r-2:r-1);var s=new Uint8Array(r),o=0;return $r(e,function(i){s[o++]=i}),o!==r?s.subarray(0,o):s}function $r(e,t){function r(c){for(;s<e.length;){var h=e.charAt(s++),l=$[h];if(l!=null)return l;if(!/^[\s\xa0]*$/.test(h))throw Error("Unknown base64 encoding at char: "+h)}return c}Dt();for(var s=0;;){var o=r(-1),i=r(0),a=r(64),u=r(64);if(u===64&&o===-1)break;t(o<<2|i>>4),a!=64&&(t(i<<4&240|a>>2),u!=64&&t(a<<6&192|u))}}function Dt(){if(!$){$={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],r=0;r<5;r++){var s=e.concat(t[r].split(""));wt[r]=s;for(var o=0;o<s.length;o++){var i=s[o];$[i]===void 0&&($[i]=o)}}}}const Yr=["content-type","grpc-status","grpc-message"];function G(e,t){if(t.code!=0){var r=new E(t.code,decodeURIComponent(t.message||""),t.metadata);for(let s=0;s<e.j.length;s++)e.j[s](r)}for(t={code:t.code,details:decodeURIComponent(t.message||""),metadata:t.metadata},r=0;r<e.m.length;r++)e.m[r](t)}function Hr(e,t){for(let r=0;r<e.l.length;r++)e.l[r](t)}function Kr(e){for(let t=0;t<e.i.length;t++)e.i[t]()}function N(e,t){t=e.indexOf(t),t>-1&&e.splice(t,1)}class I{constructor(t){this.g=t.$,this.v=null,this.h=[],this.m=[],this.l=[],this.j=[],this.i=[],this.u=!1,this.o=0,this.A=new gr;const r=this;ve(this.g,"readystatechange",function(){var s=r.g;if(s=s.g?s.g.getResponseHeader("Content-Type"):null){if(s=s.toLowerCase(),s.lastIndexOf("application/grpc-web-text",0)==0){s=r.g;try{var o=s.g?s.g.responseText:""}catch(c){U(s.h,"Can not get responseText: "+c.message),o=""}if(s=o||"",o=s.length-s.length%4,s=s.substr(r.o,o-r.o),s.length==0)return;r.o=o,s=Xr(s)}else if(s.lastIndexOf("application/grpc",0)==0)s=new Uint8Array(xr(r.g));else{G(r,new E(2,"Unknown Content-type received."));return}o=null;try{o=hr(r.A,s)}catch{G(r,new E(2,"Error in parsing response body"))}if(o)for(s=0;s<o.length;s++){if(Re in o[s]){var i=o[s][Re];if(i){var a=!1;let c;try{c=r.v(i),a=!0}catch(h){G(r,new E(13,`Error when deserializing response data; error: ${h}, response: ${c}`))}if(a){i=r,a=c;for(var u=0;u<i.h.length;u++)i.h[u](a)}}}if(X in o[s]&&o[s][X].length>0){for(i="",a=0;a<o[s][X].length;a++)i+=String.fromCharCode(o[s][X][a]);for(i=i.trim().split(`\r
`),a={},u=0;u<i.length;u++){const c=i[u].indexOf(":");a[i[u].substring(0,c).trim()]=i[u].substring(c+1).trim()}i=a,a=0,u="","grpc-status"in i&&(a=Number(i["grpc-status"]),delete i["grpc-status"]),"grpc-message"in i&&(u=i["grpc-message"],delete i["grpc-message"]),G(r,new E(a,u,i))}}}}),ve(this.g,"complete",function(){var s=r.g.m,o=2,i="";const a={};o=Jr(r.g);const u={};for(var c in o)o.hasOwnProperty(c)&&(u[c.toLowerCase()]=o[c]);if(Object.keys(u).forEach(h=>{Yr.includes(h)||(a[h]=u[h])}),Hr(r,a),c=-1,s!=0){switch(s){case 7:o=10;break;case 8:o=4;break;case 6:c=r.g.getStatus(),o=dr(c);break;default:o=14}o==10&&r.u||(i=lr(s),c!=-1&&(i+=", http status code: "+c),G(r,new E(o,i)))}else s=!1,"grpc-status"in u&&(o=Number(u["grpc-status"]),"grpc-message"in u&&(i=u["grpc-message"]),o!=0&&(G(r,new E(o,i||"",u)),s=!0)),s||Kr(r)})}on(t,r){return t=="data"?this.h.push(r):t=="status"?this.m.push(r):t=="metadata"?this.l.push(r):t=="end"?this.i.push(r):t=="error"&&this.j.push(r),this}removeListener(t,r){return t=="data"?N(this.h,r):t=="status"?N(this.m,r):t=="metadata"?N(this.l,r):t=="end"?N(this.i,r):t=="error"&&N(this.j,r),this}cancel(){this.u=!0,this.g.abort()}}I.prototype.cancel=I.prototype.cancel;I.prototype.removeListener=I.prototype.removeListener;I.prototype.on=I.prototype.on;function Vr(e){let t="";return vr(e,function(r,s){t+=s,t+=":",t+=r,t+=`\r
`}),t}function Ee(e,t){return t.reduce((r,s)=>o=>s.intercept(o,r),e)}function bt(e,t,r){let s=!1,o=null,i=!1;e.on("data",function(a){s=!0,o=a}),e.on("error",function(a){a.code==0||i||(i=!0,t(a,null))}),e.on("status",function(a){a.code==0||i?r&&t(null,null,a):(i=!0,t({code:a.code,message:a.details,metadata:a.metadata},null))}),r&&e.on("metadata",function(a){t(null,null,null,a)}),e.on("end",function(){i||(s?r?t(null,o,null,null,!0):t(null,o):t({code:2,message:"Incomplete response"})),r&&t(null,null)})}function Fe(e,t,r){var s=t.getMethodDescriptor(),o=r+s.getName();r=e.i?e.i:new V,r.O=e.j;const i=new I({$:r});i.v=s.h;var a=t.getMetadata();for(var u in a)r.headers.set(u,a[u]);if(e.g=="text"?(r.headers.set("Content-Type","application/grpc-web-text"),r.headers.set("Accept","application/grpc-web-text")):r.headers.set("Content-Type","application/grpc-web+proto"),r.headers.set("X-User-Agent","grpc-web-javascript/0.1"),r.headers.set("X-Grpc-Web","1"),r.headers.has("deadline")&&(u=Number(r.headers.get("deadline")),u=Math.ceil(u-new Date().getTime()),r.headers.delete("deadline"),u===1/0&&(u=0),u>0&&(r.headers.set("grpc-timeout",u+"m"),r.u=Math.max(0,Math.max(1e3,Math.ceil(u*1.1))))),e.l){u=r.headers,a={};for(c of u.keys())a[c]=u.get(c);var c=a;r.headers.clear();e:{for(h in c){var h=!1;break e}h=!0}h||(c=Vr(c),typeof o=="string"?(h=encodeURIComponent("$httpHeaders"),c=c!=null?"="+encodeURIComponent(String(c)):"",(h+=c)&&(c=o.indexOf("#"),c<0&&(c=o.length),u=o.indexOf("?"),u<0||u>c?(u=c,a=""):a=o.substring(u+1,c),o=[o.slice(0,u),a,o.slice(c)],c=o[1],o[1]=h?c?c+"&"+h:h:c,o=o[0]+(o[1]?"?"+o[1]:"")+o[2])):o.g("$httpHeaders",c))}for(t=(0,s.g)(t.getRequestMessage()),s=t.length,h=[0,0,0,0],c=new Uint8Array(5+s),u=3;u>=0;u--)h[u]=s%256,s>>>=8;if(c.set(new Uint8Array(h),1),c.set(t,5),t=c,e.g=="text"){e=t;var l;for(l===void 0&&(l=0),Dt(),l=wt[l],t=Array(Math.floor(e.length/3)),s=l[64]||"",h=c=0;c<e.length-2;c+=3){var g=e[c],y=e[c+1];a=e[c+2],u=l[g>>2],g=l[(g&3)<<4|y>>4],y=l[(y&15)<<2|a>>6],a=l[a&63],t[h++]=u+g+y+a}switch(u=0,a=s,e.length-c){case 2:u=e[c+1],a=l[(u&15)<<2]||s;case 1:e=e[c],t[h]=l[e>>2]+l[(e&3)<<4|u>>4]+a+s}t=t.join("")}else e.g=="binary"&&(r.B="arraybuffer");return kr(r,o,t),i}function Zr(e,t,r,s,o,i={}){const a=t.substr(0,t.length-o.name.length),u=i&&i.signal;return Ee(c=>new Promise((h,l)=>{if(u&&u.aborted){const f=new E(1,"Aborted");f.cause=u.reason,l(f)}else{var g=Fe(e,c,a),y,R,d;bt(g,(f,L,Ie,qe,Pt)=>{f?l(f):Pt?d=L:Ie?R=Ie:qe?y=qe:h(ur(c.getMethodDescriptor(),d,y,R))},!0),u&&u.addEventListener("abort",()=>{g.cancel();const f=new E(1,"Aborted");f.cause=u.reason,l(f)})}}),e.m).call(e,ge(o,r,s)).then(c=>c.getResponseMessage())}class q{constructor(t={},r){this.g=t.format||k("format",t)||"text",this.l=t.ca||k("suppressCorsPreflight",t)||!1,this.j=t.withCredentials||k("withCredentials",t)||!1,this.h=t.ba||k("streamInterceptors",t)||[],this.m=t.da||k("unaryInterceptors",t)||[],this.i=r||null}Y(t,r,s,o,i){const a=t.substr(0,t.length-o.name.length);return t=Ee(u=>Fe(this,u,a),this.h).call(this,ge(o,r,s)),bt(t,i,!1),new cr(t)}unaryCall(t,r,s,o,i={}){return Zr(this,t,r,s,o,i)}Z(t,r,s,o){const i=t.substr(0,t.length-o.name.length);return Ee(a=>Fe(this,a,i),this.h).call(this,ge(o,r,s))}}q.prototype.serverStreaming=q.prototype.Z;q.prototype.unaryCall=q.prototype.unaryCall;q.prototype.rpcCall=q.prototype.Y;var S=de,Ct=q,w={UNARY:"unary",SERVER_STREAMING:"server_streaming",BIDI_STREAMING:"bidi_streaming"};Te=typeof globalThis<"u"&&globalThis||self;var n=require("google-protobuf"),p=n,m=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||typeof m<"u"&&m||typeof self<"u"&&self||(function(){return this}).call(null)||Function("return this")();p.exportSymbol("proto.chat.ChatMessage",null,m);p.exportSymbol("proto.chat.GetMessagesRequest",null,m);p.exportSymbol("proto.chat.GetOnlineUsersRequest",null,m);p.exportSymbol("proto.chat.GetOnlineUsersResponse",null,m);p.exportSymbol("proto.chat.GetUserRequest",null,m);p.exportSymbol("proto.chat.GetUserResponse",null,m);p.exportSymbol("proto.chat.JoinRoomRequest",null,m);p.exportSymbol("proto.chat.JoinRoomResponse",null,m);p.exportSymbol("proto.chat.LeaveRoomRequest",null,m);p.exportSymbol("proto.chat.LeaveRoomResponse",null,m);p.exportSymbol("proto.chat.LoginRequest",null,m);p.exportSymbol("proto.chat.LoginResponse",null,m);p.exportSymbol("proto.chat.MessageType",null,m);p.exportSymbol("proto.chat.RegisterRequest",null,m);p.exportSymbol("proto.chat.RegisterResponse",null,m);p.exportSymbol("proto.chat.SendMessageRequest",null,m);p.exportSymbol("proto.chat.SendMessageResponse",null,m);p.exportSymbol("proto.chat.UpdateUserRequest",null,m);p.exportSymbol("proto.chat.UpdateUserResponse",null,m);p.exportSymbol("proto.chat.User",null,m);proto.chat.User=function(e){n.Message.initialize(this,e,0,-1,null,null)};p.inherits(proto.chat.User,n.Message);p.DEBUG&&!COMPILED&&(proto.chat.User.displayName="proto.chat.User");proto.chat.RegisterRequest=function(e){n.Message.initialize(this,e,0,-1,null,null)};p.inherits(proto.chat.RegisterRequest,n.Message);p.DEBUG&&!COMPILED&&(proto.chat.RegisterRequest.displayName="proto.chat.RegisterRequest");proto.chat.RegisterResponse=function(e){n.Message.initialize(this,e,0,-1,null,null)};p.inherits(proto.chat.RegisterResponse,n.Message);p.DEBUG&&!COMPILED&&(proto.chat.RegisterResponse.displayName="proto.chat.RegisterResponse");proto.chat.LoginRequest=function(e){n.Message.initialize(this,e,0,-1,null,null)};p.inherits(proto.chat.LoginRequest,n.Message);p.DEBUG&&!COMPILED&&(proto.chat.LoginRequest.displayName="proto.chat.LoginRequest");proto.chat.LoginResponse=function(e){n.Message.initialize(this,e,0,-1,null,null)};p.inherits(proto.chat.LoginResponse,n.Message);p.DEBUG&&!COMPILED&&(proto.chat.LoginResponse.displayName="proto.chat.LoginResponse");proto.chat.GetUserRequest=function(e){n.Message.initialize(this,e,0,-1,null,null)};p.inherits(proto.chat.GetUserRequest,n.Message);p.DEBUG&&!COMPILED&&(proto.chat.GetUserRequest.displayName="proto.chat.GetUserRequest");proto.chat.GetUserResponse=function(e){n.Message.initialize(this,e,0,-1,null,null)};p.inherits(proto.chat.GetUserResponse,n.Message);p.DEBUG&&!COMPILED&&(proto.chat.GetUserResponse.displayName="proto.chat.GetUserResponse");proto.chat.UpdateUserRequest=function(e){n.Message.initialize(this,e,0,-1,null,null)};p.inherits(proto.chat.UpdateUserRequest,n.Message);p.DEBUG&&!COMPILED&&(proto.chat.UpdateUserRequest.displayName="proto.chat.UpdateUserRequest");proto.chat.UpdateUserResponse=function(e){n.Message.initialize(this,e,0,-1,null,null)};p.inherits(proto.chat.UpdateUserResponse,n.Message);p.DEBUG&&!COMPILED&&(proto.chat.UpdateUserResponse.displayName="proto.chat.UpdateUserResponse");proto.chat.ChatMessage=function(e){n.Message.initialize(this,e,0,-1,null,null)};p.inherits(proto.chat.ChatMessage,n.Message);p.DEBUG&&!COMPILED&&(proto.chat.ChatMessage.displayName="proto.chat.ChatMessage");proto.chat.SendMessageRequest=function(e){n.Message.initialize(this,e,0,-1,null,null)};p.inherits(proto.chat.SendMessageRequest,n.Message);p.DEBUG&&!COMPILED&&(proto.chat.SendMessageRequest.displayName="proto.chat.SendMessageRequest");proto.chat.SendMessageResponse=function(e){n.Message.initialize(this,e,0,-1,null,null)};p.inherits(proto.chat.SendMessageResponse,n.Message);p.DEBUG&&!COMPILED&&(proto.chat.SendMessageResponse.displayName="proto.chat.SendMessageResponse");proto.chat.GetMessagesRequest=function(e){n.Message.initialize(this,e,0,-1,null,null)};p.inherits(proto.chat.GetMessagesRequest,n.Message);p.DEBUG&&!COMPILED&&(proto.chat.GetMessagesRequest.displayName="proto.chat.GetMessagesRequest");proto.chat.GetOnlineUsersRequest=function(e){n.Message.initialize(this,e,0,-1,null,null)};p.inherits(proto.chat.GetOnlineUsersRequest,n.Message);p.DEBUG&&!COMPILED&&(proto.chat.GetOnlineUsersRequest.displayName="proto.chat.GetOnlineUsersRequest");proto.chat.GetOnlineUsersResponse=function(e){n.Message.initialize(this,e,0,-1,proto.chat.GetOnlineUsersResponse.repeatedFields_,null)};p.inherits(proto.chat.GetOnlineUsersResponse,n.Message);p.DEBUG&&!COMPILED&&(proto.chat.GetOnlineUsersResponse.displayName="proto.chat.GetOnlineUsersResponse");proto.chat.JoinRoomRequest=function(e){n.Message.initialize(this,e,0,-1,null,null)};p.inherits(proto.chat.JoinRoomRequest,n.Message);p.DEBUG&&!COMPILED&&(proto.chat.JoinRoomRequest.displayName="proto.chat.JoinRoomRequest");proto.chat.JoinRoomResponse=function(e){n.Message.initialize(this,e,0,-1,null,null)};p.inherits(proto.chat.JoinRoomResponse,n.Message);p.DEBUG&&!COMPILED&&(proto.chat.JoinRoomResponse.displayName="proto.chat.JoinRoomResponse");proto.chat.LeaveRoomRequest=function(e){n.Message.initialize(this,e,0,-1,null,null)};p.inherits(proto.chat.LeaveRoomRequest,n.Message);p.DEBUG&&!COMPILED&&(proto.chat.LeaveRoomRequest.displayName="proto.chat.LeaveRoomRequest");proto.chat.LeaveRoomResponse=function(e){n.Message.initialize(this,e,0,-1,null,null)};p.inherits(proto.chat.LeaveRoomResponse,n.Message);p.DEBUG&&!COMPILED&&(proto.chat.LeaveRoomResponse.displayName="proto.chat.LeaveRoomResponse");n.Message.GENERATE_TO_OBJECT&&(proto.chat.User.prototype.toObject=function(e){return proto.chat.User.toObject(e,this)},proto.chat.User.toObject=function(e,t){var r={id:n.Message.getFieldWithDefault(t,1,""),username:n.Message.getFieldWithDefault(t,2,""),email:n.Message.getFieldWithDefault(t,3,""),avatar:n.Message.getFieldWithDefault(t,4,""),isOnline:n.Message.getBooleanFieldWithDefault(t,5,!1),createdAt:n.Message.getFieldWithDefault(t,6,0),updatedAt:n.Message.getFieldWithDefault(t,7,0)};return e&&(r.$jspbMessageInstance=t),r});proto.chat.User.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.chat.User;return proto.chat.User.deserializeBinaryFromReader(r,t)};proto.chat.User.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){var r=t.getFieldNumber();switch(r){case 1:var s=t.readString();e.setId(s);break;case 2:var s=t.readString();e.setUsername(s);break;case 3:var s=t.readString();e.setEmail(s);break;case 4:var s=t.readString();e.setAvatar(s);break;case 5:var s=t.readBool();e.setIsOnline(s);break;case 6:var s=t.readInt64();e.setCreatedAt(s);break;case 7:var s=t.readInt64();e.setUpdatedAt(s);break;default:t.skipField();break}}return e};proto.chat.User.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.chat.User.serializeBinaryToWriter(this,e),e.getResultBuffer()};proto.chat.User.serializeBinaryToWriter=function(e,t){var r=void 0;r=e.getId(),r.length>0&&t.writeString(1,r),r=e.getUsername(),r.length>0&&t.writeString(2,r),r=e.getEmail(),r.length>0&&t.writeString(3,r),r=e.getAvatar(),r.length>0&&t.writeString(4,r),r=e.getIsOnline(),r&&t.writeBool(5,r),r=e.getCreatedAt(),r!==0&&t.writeInt64(6,r),r=e.getUpdatedAt(),r!==0&&t.writeInt64(7,r)};proto.chat.User.prototype.getId=function(){return n.Message.getFieldWithDefault(this,1,"")};proto.chat.User.prototype.setId=function(e){return n.Message.setProto3StringField(this,1,e)};proto.chat.User.prototype.getUsername=function(){return n.Message.getFieldWithDefault(this,2,"")};proto.chat.User.prototype.setUsername=function(e){return n.Message.setProto3StringField(this,2,e)};proto.chat.User.prototype.getEmail=function(){return n.Message.getFieldWithDefault(this,3,"")};proto.chat.User.prototype.setEmail=function(e){return n.Message.setProto3StringField(this,3,e)};proto.chat.User.prototype.getAvatar=function(){return n.Message.getFieldWithDefault(this,4,"")};proto.chat.User.prototype.setAvatar=function(e){return n.Message.setProto3StringField(this,4,e)};proto.chat.User.prototype.getIsOnline=function(){return n.Message.getBooleanFieldWithDefault(this,5,!1)};proto.chat.User.prototype.setIsOnline=function(e){return n.Message.setProto3BooleanField(this,5,e)};proto.chat.User.prototype.getCreatedAt=function(){return n.Message.getFieldWithDefault(this,6,0)};proto.chat.User.prototype.setCreatedAt=function(e){return n.Message.setProto3IntField(this,6,e)};proto.chat.User.prototype.getUpdatedAt=function(){return n.Message.getFieldWithDefault(this,7,0)};proto.chat.User.prototype.setUpdatedAt=function(e){return n.Message.setProto3IntField(this,7,e)};n.Message.GENERATE_TO_OBJECT&&(proto.chat.RegisterRequest.prototype.toObject=function(e){return proto.chat.RegisterRequest.toObject(e,this)},proto.chat.RegisterRequest.toObject=function(e,t){var r={username:n.Message.getFieldWithDefault(t,1,""),email:n.Message.getFieldWithDefault(t,2,""),password:n.Message.getFieldWithDefault(t,3,"")};return e&&(r.$jspbMessageInstance=t),r});proto.chat.RegisterRequest.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.chat.RegisterRequest;return proto.chat.RegisterRequest.deserializeBinaryFromReader(r,t)};proto.chat.RegisterRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){var r=t.getFieldNumber();switch(r){case 1:var s=t.readString();e.setUsername(s);break;case 2:var s=t.readString();e.setEmail(s);break;case 3:var s=t.readString();e.setPassword(s);break;default:t.skipField();break}}return e};proto.chat.RegisterRequest.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.chat.RegisterRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()};proto.chat.RegisterRequest.serializeBinaryToWriter=function(e,t){var r=void 0;r=e.getUsername(),r.length>0&&t.writeString(1,r),r=e.getEmail(),r.length>0&&t.writeString(2,r),r=e.getPassword(),r.length>0&&t.writeString(3,r)};proto.chat.RegisterRequest.prototype.getUsername=function(){return n.Message.getFieldWithDefault(this,1,"")};proto.chat.RegisterRequest.prototype.setUsername=function(e){return n.Message.setProto3StringField(this,1,e)};proto.chat.RegisterRequest.prototype.getEmail=function(){return n.Message.getFieldWithDefault(this,2,"")};proto.chat.RegisterRequest.prototype.setEmail=function(e){return n.Message.setProto3StringField(this,2,e)};proto.chat.RegisterRequest.prototype.getPassword=function(){return n.Message.getFieldWithDefault(this,3,"")};proto.chat.RegisterRequest.prototype.setPassword=function(e){return n.Message.setProto3StringField(this,3,e)};n.Message.GENERATE_TO_OBJECT&&(proto.chat.RegisterResponse.prototype.toObject=function(e){return proto.chat.RegisterResponse.toObject(e,this)},proto.chat.RegisterResponse.toObject=function(e,t){var r,s={success:n.Message.getBooleanFieldWithDefault(t,1,!1),message:n.Message.getFieldWithDefault(t,2,""),user:(r=t.getUser())&&proto.chat.User.toObject(e,r)};return e&&(s.$jspbMessageInstance=t),s});proto.chat.RegisterResponse.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.chat.RegisterResponse;return proto.chat.RegisterResponse.deserializeBinaryFromReader(r,t)};proto.chat.RegisterResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){var r=t.getFieldNumber();switch(r){case 1:var s=t.readBool();e.setSuccess(s);break;case 2:var s=t.readString();e.setMessage(s);break;case 3:var s=new proto.chat.User;t.readMessage(s,proto.chat.User.deserializeBinaryFromReader),e.setUser(s);break;default:t.skipField();break}}return e};proto.chat.RegisterResponse.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.chat.RegisterResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()};proto.chat.RegisterResponse.serializeBinaryToWriter=function(e,t){var r=void 0;r=e.getSuccess(),r&&t.writeBool(1,r),r=e.getMessage(),r.length>0&&t.writeString(2,r),r=e.getUser(),r!=null&&t.writeMessage(3,r,proto.chat.User.serializeBinaryToWriter)};proto.chat.RegisterResponse.prototype.getSuccess=function(){return n.Message.getBooleanFieldWithDefault(this,1,!1)};proto.chat.RegisterResponse.prototype.setSuccess=function(e){return n.Message.setProto3BooleanField(this,1,e)};proto.chat.RegisterResponse.prototype.getMessage=function(){return n.Message.getFieldWithDefault(this,2,"")};proto.chat.RegisterResponse.prototype.setMessage=function(e){return n.Message.setProto3StringField(this,2,e)};proto.chat.RegisterResponse.prototype.getUser=function(){return n.Message.getWrapperField(this,proto.chat.User,3)};proto.chat.RegisterResponse.prototype.setUser=function(e){return n.Message.setWrapperField(this,3,e)};proto.chat.RegisterResponse.prototype.clearUser=function(){return this.setUser(void 0)};proto.chat.RegisterResponse.prototype.hasUser=function(){return n.Message.getField(this,3)!=null};n.Message.GENERATE_TO_OBJECT&&(proto.chat.LoginRequest.prototype.toObject=function(e){return proto.chat.LoginRequest.toObject(e,this)},proto.chat.LoginRequest.toObject=function(e,t){var r={email:n.Message.getFieldWithDefault(t,1,""),password:n.Message.getFieldWithDefault(t,2,"")};return e&&(r.$jspbMessageInstance=t),r});proto.chat.LoginRequest.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.chat.LoginRequest;return proto.chat.LoginRequest.deserializeBinaryFromReader(r,t)};proto.chat.LoginRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){var r=t.getFieldNumber();switch(r){case 1:var s=t.readString();e.setEmail(s);break;case 2:var s=t.readString();e.setPassword(s);break;default:t.skipField();break}}return e};proto.chat.LoginRequest.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.chat.LoginRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()};proto.chat.LoginRequest.serializeBinaryToWriter=function(e,t){var r=void 0;r=e.getEmail(),r.length>0&&t.writeString(1,r),r=e.getPassword(),r.length>0&&t.writeString(2,r)};proto.chat.LoginRequest.prototype.getEmail=function(){return n.Message.getFieldWithDefault(this,1,"")};proto.chat.LoginRequest.prototype.setEmail=function(e){return n.Message.setProto3StringField(this,1,e)};proto.chat.LoginRequest.prototype.getPassword=function(){return n.Message.getFieldWithDefault(this,2,"")};proto.chat.LoginRequest.prototype.setPassword=function(e){return n.Message.setProto3StringField(this,2,e)};n.Message.GENERATE_TO_OBJECT&&(proto.chat.LoginResponse.prototype.toObject=function(e){return proto.chat.LoginResponse.toObject(e,this)},proto.chat.LoginResponse.toObject=function(e,t){var r,s={success:n.Message.getBooleanFieldWithDefault(t,1,!1),message:n.Message.getFieldWithDefault(t,2,""),token:n.Message.getFieldWithDefault(t,3,""),user:(r=t.getUser())&&proto.chat.User.toObject(e,r)};return e&&(s.$jspbMessageInstance=t),s});proto.chat.LoginResponse.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.chat.LoginResponse;return proto.chat.LoginResponse.deserializeBinaryFromReader(r,t)};proto.chat.LoginResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){var r=t.getFieldNumber();switch(r){case 1:var s=t.readBool();e.setSuccess(s);break;case 2:var s=t.readString();e.setMessage(s);break;case 3:var s=t.readString();e.setToken(s);break;case 4:var s=new proto.chat.User;t.readMessage(s,proto.chat.User.deserializeBinaryFromReader),e.setUser(s);break;default:t.skipField();break}}return e};proto.chat.LoginResponse.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.chat.LoginResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()};proto.chat.LoginResponse.serializeBinaryToWriter=function(e,t){var r=void 0;r=e.getSuccess(),r&&t.writeBool(1,r),r=e.getMessage(),r.length>0&&t.writeString(2,r),r=e.getToken(),r.length>0&&t.writeString(3,r),r=e.getUser(),r!=null&&t.writeMessage(4,r,proto.chat.User.serializeBinaryToWriter)};proto.chat.LoginResponse.prototype.getSuccess=function(){return n.Message.getBooleanFieldWithDefault(this,1,!1)};proto.chat.LoginResponse.prototype.setSuccess=function(e){return n.Message.setProto3BooleanField(this,1,e)};proto.chat.LoginResponse.prototype.getMessage=function(){return n.Message.getFieldWithDefault(this,2,"")};proto.chat.LoginResponse.prototype.setMessage=function(e){return n.Message.setProto3StringField(this,2,e)};proto.chat.LoginResponse.prototype.getToken=function(){return n.Message.getFieldWithDefault(this,3,"")};proto.chat.LoginResponse.prototype.setToken=function(e){return n.Message.setProto3StringField(this,3,e)};proto.chat.LoginResponse.prototype.getUser=function(){return n.Message.getWrapperField(this,proto.chat.User,4)};proto.chat.LoginResponse.prototype.setUser=function(e){return n.Message.setWrapperField(this,4,e)};proto.chat.LoginResponse.prototype.clearUser=function(){return this.setUser(void 0)};proto.chat.LoginResponse.prototype.hasUser=function(){return n.Message.getField(this,4)!=null};n.Message.GENERATE_TO_OBJECT&&(proto.chat.GetUserRequest.prototype.toObject=function(e){return proto.chat.GetUserRequest.toObject(e,this)},proto.chat.GetUserRequest.toObject=function(e,t){var r={userId:n.Message.getFieldWithDefault(t,1,"")};return e&&(r.$jspbMessageInstance=t),r});proto.chat.GetUserRequest.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.chat.GetUserRequest;return proto.chat.GetUserRequest.deserializeBinaryFromReader(r,t)};proto.chat.GetUserRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){var r=t.getFieldNumber();switch(r){case 1:var s=t.readString();e.setUserId(s);break;default:t.skipField();break}}return e};proto.chat.GetUserRequest.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.chat.GetUserRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()};proto.chat.GetUserRequest.serializeBinaryToWriter=function(e,t){var r=void 0;r=e.getUserId(),r.length>0&&t.writeString(1,r)};proto.chat.GetUserRequest.prototype.getUserId=function(){return n.Message.getFieldWithDefault(this,1,"")};proto.chat.GetUserRequest.prototype.setUserId=function(e){return n.Message.setProto3StringField(this,1,e)};n.Message.GENERATE_TO_OBJECT&&(proto.chat.GetUserResponse.prototype.toObject=function(e){return proto.chat.GetUserResponse.toObject(e,this)},proto.chat.GetUserResponse.toObject=function(e,t){var r,s={success:n.Message.getBooleanFieldWithDefault(t,1,!1),user:(r=t.getUser())&&proto.chat.User.toObject(e,r)};return e&&(s.$jspbMessageInstance=t),s});proto.chat.GetUserResponse.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.chat.GetUserResponse;return proto.chat.GetUserResponse.deserializeBinaryFromReader(r,t)};proto.chat.GetUserResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){var r=t.getFieldNumber();switch(r){case 1:var s=t.readBool();e.setSuccess(s);break;case 2:var s=new proto.chat.User;t.readMessage(s,proto.chat.User.deserializeBinaryFromReader),e.setUser(s);break;default:t.skipField();break}}return e};proto.chat.GetUserResponse.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.chat.GetUserResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()};proto.chat.GetUserResponse.serializeBinaryToWriter=function(e,t){var r=void 0;r=e.getSuccess(),r&&t.writeBool(1,r),r=e.getUser(),r!=null&&t.writeMessage(2,r,proto.chat.User.serializeBinaryToWriter)};proto.chat.GetUserResponse.prototype.getSuccess=function(){return n.Message.getBooleanFieldWithDefault(this,1,!1)};proto.chat.GetUserResponse.prototype.setSuccess=function(e){return n.Message.setProto3BooleanField(this,1,e)};proto.chat.GetUserResponse.prototype.getUser=function(){return n.Message.getWrapperField(this,proto.chat.User,2)};proto.chat.GetUserResponse.prototype.setUser=function(e){return n.Message.setWrapperField(this,2,e)};proto.chat.GetUserResponse.prototype.clearUser=function(){return this.setUser(void 0)};proto.chat.GetUserResponse.prototype.hasUser=function(){return n.Message.getField(this,2)!=null};n.Message.GENERATE_TO_OBJECT&&(proto.chat.UpdateUserRequest.prototype.toObject=function(e){return proto.chat.UpdateUserRequest.toObject(e,this)},proto.chat.UpdateUserRequest.toObject=function(e,t){var r={userId:n.Message.getFieldWithDefault(t,1,""),username:n.Message.getFieldWithDefault(t,2,""),avatar:n.Message.getFieldWithDefault(t,3,"")};return e&&(r.$jspbMessageInstance=t),r});proto.chat.UpdateUserRequest.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.chat.UpdateUserRequest;return proto.chat.UpdateUserRequest.deserializeBinaryFromReader(r,t)};proto.chat.UpdateUserRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){var r=t.getFieldNumber();switch(r){case 1:var s=t.readString();e.setUserId(s);break;case 2:var s=t.readString();e.setUsername(s);break;case 3:var s=t.readString();e.setAvatar(s);break;default:t.skipField();break}}return e};proto.chat.UpdateUserRequest.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.chat.UpdateUserRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()};proto.chat.UpdateUserRequest.serializeBinaryToWriter=function(e,t){var r=void 0;r=e.getUserId(),r.length>0&&t.writeString(1,r),r=e.getUsername(),r.length>0&&t.writeString(2,r),r=e.getAvatar(),r.length>0&&t.writeString(3,r)};proto.chat.UpdateUserRequest.prototype.getUserId=function(){return n.Message.getFieldWithDefault(this,1,"")};proto.chat.UpdateUserRequest.prototype.setUserId=function(e){return n.Message.setProto3StringField(this,1,e)};proto.chat.UpdateUserRequest.prototype.getUsername=function(){return n.Message.getFieldWithDefault(this,2,"")};proto.chat.UpdateUserRequest.prototype.setUsername=function(e){return n.Message.setProto3StringField(this,2,e)};proto.chat.UpdateUserRequest.prototype.getAvatar=function(){return n.Message.getFieldWithDefault(this,3,"")};proto.chat.UpdateUserRequest.prototype.setAvatar=function(e){return n.Message.setProto3StringField(this,3,e)};n.Message.GENERATE_TO_OBJECT&&(proto.chat.UpdateUserResponse.prototype.toObject=function(e){return proto.chat.UpdateUserResponse.toObject(e,this)},proto.chat.UpdateUserResponse.toObject=function(e,t){var r,s={success:n.Message.getBooleanFieldWithDefault(t,1,!1),message:n.Message.getFieldWithDefault(t,2,""),user:(r=t.getUser())&&proto.chat.User.toObject(e,r)};return e&&(s.$jspbMessageInstance=t),s});proto.chat.UpdateUserResponse.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.chat.UpdateUserResponse;return proto.chat.UpdateUserResponse.deserializeBinaryFromReader(r,t)};proto.chat.UpdateUserResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){var r=t.getFieldNumber();switch(r){case 1:var s=t.readBool();e.setSuccess(s);break;case 2:var s=t.readString();e.setMessage(s);break;case 3:var s=new proto.chat.User;t.readMessage(s,proto.chat.User.deserializeBinaryFromReader),e.setUser(s);break;default:t.skipField();break}}return e};proto.chat.UpdateUserResponse.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.chat.UpdateUserResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()};proto.chat.UpdateUserResponse.serializeBinaryToWriter=function(e,t){var r=void 0;r=e.getSuccess(),r&&t.writeBool(1,r),r=e.getMessage(),r.length>0&&t.writeString(2,r),r=e.getUser(),r!=null&&t.writeMessage(3,r,proto.chat.User.serializeBinaryToWriter)};proto.chat.UpdateUserResponse.prototype.getSuccess=function(){return n.Message.getBooleanFieldWithDefault(this,1,!1)};proto.chat.UpdateUserResponse.prototype.setSuccess=function(e){return n.Message.setProto3BooleanField(this,1,e)};proto.chat.UpdateUserResponse.prototype.getMessage=function(){return n.Message.getFieldWithDefault(this,2,"")};proto.chat.UpdateUserResponse.prototype.setMessage=function(e){return n.Message.setProto3StringField(this,2,e)};proto.chat.UpdateUserResponse.prototype.getUser=function(){return n.Message.getWrapperField(this,proto.chat.User,3)};proto.chat.UpdateUserResponse.prototype.setUser=function(e){return n.Message.setWrapperField(this,3,e)};proto.chat.UpdateUserResponse.prototype.clearUser=function(){return this.setUser(void 0)};proto.chat.UpdateUserResponse.prototype.hasUser=function(){return n.Message.getField(this,3)!=null};n.Message.GENERATE_TO_OBJECT&&(proto.chat.ChatMessage.prototype.toObject=function(e){return proto.chat.ChatMessage.toObject(e,this)},proto.chat.ChatMessage.toObject=function(e,t){var r={id:n.Message.getFieldWithDefault(t,1,""),userId:n.Message.getFieldWithDefault(t,2,""),username:n.Message.getFieldWithDefault(t,3,""),content:n.Message.getFieldWithDefault(t,4,""),roomId:n.Message.getFieldWithDefault(t,5,""),messageType:n.Message.getFieldWithDefault(t,6,0),timestamp:n.Message.getFieldWithDefault(t,7,0)};return e&&(r.$jspbMessageInstance=t),r});proto.chat.ChatMessage.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.chat.ChatMessage;return proto.chat.ChatMessage.deserializeBinaryFromReader(r,t)};proto.chat.ChatMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){var r=t.getFieldNumber();switch(r){case 1:var s=t.readString();e.setId(s);break;case 2:var s=t.readString();e.setUserId(s);break;case 3:var s=t.readString();e.setUsername(s);break;case 4:var s=t.readString();e.setContent(s);break;case 5:var s=t.readString();e.setRoomId(s);break;case 6:var s=t.readEnum();e.setMessageType(s);break;case 7:var s=t.readInt64();e.setTimestamp(s);break;default:t.skipField();break}}return e};proto.chat.ChatMessage.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.chat.ChatMessage.serializeBinaryToWriter(this,e),e.getResultBuffer()};proto.chat.ChatMessage.serializeBinaryToWriter=function(e,t){var r=void 0;r=e.getId(),r.length>0&&t.writeString(1,r),r=e.getUserId(),r.length>0&&t.writeString(2,r),r=e.getUsername(),r.length>0&&t.writeString(3,r),r=e.getContent(),r.length>0&&t.writeString(4,r),r=e.getRoomId(),r.length>0&&t.writeString(5,r),r=e.getMessageType(),r!==0&&t.writeEnum(6,r),r=e.getTimestamp(),r!==0&&t.writeInt64(7,r)};proto.chat.ChatMessage.prototype.getId=function(){return n.Message.getFieldWithDefault(this,1,"")};proto.chat.ChatMessage.prototype.setId=function(e){return n.Message.setProto3StringField(this,1,e)};proto.chat.ChatMessage.prototype.getUserId=function(){return n.Message.getFieldWithDefault(this,2,"")};proto.chat.ChatMessage.prototype.setUserId=function(e){return n.Message.setProto3StringField(this,2,e)};proto.chat.ChatMessage.prototype.getUsername=function(){return n.Message.getFieldWithDefault(this,3,"")};proto.chat.ChatMessage.prototype.setUsername=function(e){return n.Message.setProto3StringField(this,3,e)};proto.chat.ChatMessage.prototype.getContent=function(){return n.Message.getFieldWithDefault(this,4,"")};proto.chat.ChatMessage.prototype.setContent=function(e){return n.Message.setProto3StringField(this,4,e)};proto.chat.ChatMessage.prototype.getRoomId=function(){return n.Message.getFieldWithDefault(this,5,"")};proto.chat.ChatMessage.prototype.setRoomId=function(e){return n.Message.setProto3StringField(this,5,e)};proto.chat.ChatMessage.prototype.getMessageType=function(){return n.Message.getFieldWithDefault(this,6,0)};proto.chat.ChatMessage.prototype.setMessageType=function(e){return n.Message.setProto3EnumField(this,6,e)};proto.chat.ChatMessage.prototype.getTimestamp=function(){return n.Message.getFieldWithDefault(this,7,0)};proto.chat.ChatMessage.prototype.setTimestamp=function(e){return n.Message.setProto3IntField(this,7,e)};n.Message.GENERATE_TO_OBJECT&&(proto.chat.SendMessageRequest.prototype.toObject=function(e){return proto.chat.SendMessageRequest.toObject(e,this)},proto.chat.SendMessageRequest.toObject=function(e,t){var r={userId:n.Message.getFieldWithDefault(t,1,""),content:n.Message.getFieldWithDefault(t,2,""),roomId:n.Message.getFieldWithDefault(t,3,""),messageType:n.Message.getFieldWithDefault(t,4,0)};return e&&(r.$jspbMessageInstance=t),r});proto.chat.SendMessageRequest.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.chat.SendMessageRequest;return proto.chat.SendMessageRequest.deserializeBinaryFromReader(r,t)};proto.chat.SendMessageRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){var r=t.getFieldNumber();switch(r){case 1:var s=t.readString();e.setUserId(s);break;case 2:var s=t.readString();e.setContent(s);break;case 3:var s=t.readString();e.setRoomId(s);break;case 4:var s=t.readEnum();e.setMessageType(s);break;default:t.skipField();break}}return e};proto.chat.SendMessageRequest.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.chat.SendMessageRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()};proto.chat.SendMessageRequest.serializeBinaryToWriter=function(e,t){var r=void 0;r=e.getUserId(),r.length>0&&t.writeString(1,r),r=e.getContent(),r.length>0&&t.writeString(2,r),r=e.getRoomId(),r.length>0&&t.writeString(3,r),r=e.getMessageType(),r!==0&&t.writeEnum(4,r)};proto.chat.SendMessageRequest.prototype.getUserId=function(){return n.Message.getFieldWithDefault(this,1,"")};proto.chat.SendMessageRequest.prototype.setUserId=function(e){return n.Message.setProto3StringField(this,1,e)};proto.chat.SendMessageRequest.prototype.getContent=function(){return n.Message.getFieldWithDefault(this,2,"")};proto.chat.SendMessageRequest.prototype.setContent=function(e){return n.Message.setProto3StringField(this,2,e)};proto.chat.SendMessageRequest.prototype.getRoomId=function(){return n.Message.getFieldWithDefault(this,3,"")};proto.chat.SendMessageRequest.prototype.setRoomId=function(e){return n.Message.setProto3StringField(this,3,e)};proto.chat.SendMessageRequest.prototype.getMessageType=function(){return n.Message.getFieldWithDefault(this,4,0)};proto.chat.SendMessageRequest.prototype.setMessageType=function(e){return n.Message.setProto3EnumField(this,4,e)};n.Message.GENERATE_TO_OBJECT&&(proto.chat.SendMessageResponse.prototype.toObject=function(e){return proto.chat.SendMessageResponse.toObject(e,this)},proto.chat.SendMessageResponse.toObject=function(e,t){var r,s={success:n.Message.getBooleanFieldWithDefault(t,1,!1),message:n.Message.getFieldWithDefault(t,2,""),chatMessage:(r=t.getChatMessage())&&proto.chat.ChatMessage.toObject(e,r)};return e&&(s.$jspbMessageInstance=t),s});proto.chat.SendMessageResponse.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.chat.SendMessageResponse;return proto.chat.SendMessageResponse.deserializeBinaryFromReader(r,t)};proto.chat.SendMessageResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){var r=t.getFieldNumber();switch(r){case 1:var s=t.readBool();e.setSuccess(s);break;case 2:var s=t.readString();e.setMessage(s);break;case 3:var s=new proto.chat.ChatMessage;t.readMessage(s,proto.chat.ChatMessage.deserializeBinaryFromReader),e.setChatMessage(s);break;default:t.skipField();break}}return e};proto.chat.SendMessageResponse.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.chat.SendMessageResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()};proto.chat.SendMessageResponse.serializeBinaryToWriter=function(e,t){var r=void 0;r=e.getSuccess(),r&&t.writeBool(1,r),r=e.getMessage(),r.length>0&&t.writeString(2,r),r=e.getChatMessage(),r!=null&&t.writeMessage(3,r,proto.chat.ChatMessage.serializeBinaryToWriter)};proto.chat.SendMessageResponse.prototype.getSuccess=function(){return n.Message.getBooleanFieldWithDefault(this,1,!1)};proto.chat.SendMessageResponse.prototype.setSuccess=function(e){return n.Message.setProto3BooleanField(this,1,e)};proto.chat.SendMessageResponse.prototype.getMessage=function(){return n.Message.getFieldWithDefault(this,2,"")};proto.chat.SendMessageResponse.prototype.setMessage=function(e){return n.Message.setProto3StringField(this,2,e)};proto.chat.SendMessageResponse.prototype.getChatMessage=function(){return n.Message.getWrapperField(this,proto.chat.ChatMessage,3)};proto.chat.SendMessageResponse.prototype.setChatMessage=function(e){return n.Message.setWrapperField(this,3,e)};proto.chat.SendMessageResponse.prototype.clearChatMessage=function(){return this.setChatMessage(void 0)};proto.chat.SendMessageResponse.prototype.hasChatMessage=function(){return n.Message.getField(this,3)!=null};n.Message.GENERATE_TO_OBJECT&&(proto.chat.GetMessagesRequest.prototype.toObject=function(e){return proto.chat.GetMessagesRequest.toObject(e,this)},proto.chat.GetMessagesRequest.toObject=function(e,t){var r={roomId:n.Message.getFieldWithDefault(t,1,""),limit:n.Message.getFieldWithDefault(t,2,0),beforeTimestamp:n.Message.getFieldWithDefault(t,3,0)};return e&&(r.$jspbMessageInstance=t),r});proto.chat.GetMessagesRequest.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.chat.GetMessagesRequest;return proto.chat.GetMessagesRequest.deserializeBinaryFromReader(r,t)};proto.chat.GetMessagesRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){var r=t.getFieldNumber();switch(r){case 1:var s=t.readString();e.setRoomId(s);break;case 2:var s=t.readInt32();e.setLimit(s);break;case 3:var s=t.readInt64();e.setBeforeTimestamp(s);break;default:t.skipField();break}}return e};proto.chat.GetMessagesRequest.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.chat.GetMessagesRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()};proto.chat.GetMessagesRequest.serializeBinaryToWriter=function(e,t){var r=void 0;r=e.getRoomId(),r.length>0&&t.writeString(1,r),r=e.getLimit(),r!==0&&t.writeInt32(2,r),r=e.getBeforeTimestamp(),r!==0&&t.writeInt64(3,r)};proto.chat.GetMessagesRequest.prototype.getRoomId=function(){return n.Message.getFieldWithDefault(this,1,"")};proto.chat.GetMessagesRequest.prototype.setRoomId=function(e){return n.Message.setProto3StringField(this,1,e)};proto.chat.GetMessagesRequest.prototype.getLimit=function(){return n.Message.getFieldWithDefault(this,2,0)};proto.chat.GetMessagesRequest.prototype.setLimit=function(e){return n.Message.setProto3IntField(this,2,e)};proto.chat.GetMessagesRequest.prototype.getBeforeTimestamp=function(){return n.Message.getFieldWithDefault(this,3,0)};proto.chat.GetMessagesRequest.prototype.setBeforeTimestamp=function(e){return n.Message.setProto3IntField(this,3,e)};n.Message.GENERATE_TO_OBJECT&&(proto.chat.GetOnlineUsersRequest.prototype.toObject=function(e){return proto.chat.GetOnlineUsersRequest.toObject(e,this)},proto.chat.GetOnlineUsersRequest.toObject=function(e,t){var r={roomId:n.Message.getFieldWithDefault(t,1,"")};return e&&(r.$jspbMessageInstance=t),r});proto.chat.GetOnlineUsersRequest.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.chat.GetOnlineUsersRequest;return proto.chat.GetOnlineUsersRequest.deserializeBinaryFromReader(r,t)};proto.chat.GetOnlineUsersRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){var r=t.getFieldNumber();switch(r){case 1:var s=t.readString();e.setRoomId(s);break;default:t.skipField();break}}return e};proto.chat.GetOnlineUsersRequest.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.chat.GetOnlineUsersRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()};proto.chat.GetOnlineUsersRequest.serializeBinaryToWriter=function(e,t){var r=void 0;r=e.getRoomId(),r.length>0&&t.writeString(1,r)};proto.chat.GetOnlineUsersRequest.prototype.getRoomId=function(){return n.Message.getFieldWithDefault(this,1,"")};proto.chat.GetOnlineUsersRequest.prototype.setRoomId=function(e){return n.Message.setProto3StringField(this,1,e)};proto.chat.GetOnlineUsersResponse.repeatedFields_=[1];n.Message.GENERATE_TO_OBJECT&&(proto.chat.GetOnlineUsersResponse.prototype.toObject=function(e){return proto.chat.GetOnlineUsersResponse.toObject(e,this)},proto.chat.GetOnlineUsersResponse.toObject=function(e,t){var r={usersList:n.Message.toObjectList(t.getUsersList(),proto.chat.User.toObject,e)};return e&&(r.$jspbMessageInstance=t),r});proto.chat.GetOnlineUsersResponse.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.chat.GetOnlineUsersResponse;return proto.chat.GetOnlineUsersResponse.deserializeBinaryFromReader(r,t)};proto.chat.GetOnlineUsersResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){var r=t.getFieldNumber();switch(r){case 1:var s=new proto.chat.User;t.readMessage(s,proto.chat.User.deserializeBinaryFromReader),e.addUsers(s);break;default:t.skipField();break}}return e};proto.chat.GetOnlineUsersResponse.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.chat.GetOnlineUsersResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()};proto.chat.GetOnlineUsersResponse.serializeBinaryToWriter=function(e,t){var r=void 0;r=e.getUsersList(),r.length>0&&t.writeRepeatedMessage(1,r,proto.chat.User.serializeBinaryToWriter)};proto.chat.GetOnlineUsersResponse.prototype.getUsersList=function(){return n.Message.getRepeatedWrapperField(this,proto.chat.User,1)};proto.chat.GetOnlineUsersResponse.prototype.setUsersList=function(e){return n.Message.setRepeatedWrapperField(this,1,e)};proto.chat.GetOnlineUsersResponse.prototype.addUsers=function(e,t){return n.Message.addToRepeatedWrapperField(this,1,e,proto.chat.User,t)};proto.chat.GetOnlineUsersResponse.prototype.clearUsersList=function(){return this.setUsersList([])};n.Message.GENERATE_TO_OBJECT&&(proto.chat.JoinRoomRequest.prototype.toObject=function(e){return proto.chat.JoinRoomRequest.toObject(e,this)},proto.chat.JoinRoomRequest.toObject=function(e,t){var r={userId:n.Message.getFieldWithDefault(t,1,""),roomId:n.Message.getFieldWithDefault(t,2,"")};return e&&(r.$jspbMessageInstance=t),r});proto.chat.JoinRoomRequest.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.chat.JoinRoomRequest;return proto.chat.JoinRoomRequest.deserializeBinaryFromReader(r,t)};proto.chat.JoinRoomRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){var r=t.getFieldNumber();switch(r){case 1:var s=t.readString();e.setUserId(s);break;case 2:var s=t.readString();e.setRoomId(s);break;default:t.skipField();break}}return e};proto.chat.JoinRoomRequest.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.chat.JoinRoomRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()};proto.chat.JoinRoomRequest.serializeBinaryToWriter=function(e,t){var r=void 0;r=e.getUserId(),r.length>0&&t.writeString(1,r),r=e.getRoomId(),r.length>0&&t.writeString(2,r)};proto.chat.JoinRoomRequest.prototype.getUserId=function(){return n.Message.getFieldWithDefault(this,1,"")};proto.chat.JoinRoomRequest.prototype.setUserId=function(e){return n.Message.setProto3StringField(this,1,e)};proto.chat.JoinRoomRequest.prototype.getRoomId=function(){return n.Message.getFieldWithDefault(this,2,"")};proto.chat.JoinRoomRequest.prototype.setRoomId=function(e){return n.Message.setProto3StringField(this,2,e)};n.Message.GENERATE_TO_OBJECT&&(proto.chat.JoinRoomResponse.prototype.toObject=function(e){return proto.chat.JoinRoomResponse.toObject(e,this)},proto.chat.JoinRoomResponse.toObject=function(e,t){var r={success:n.Message.getBooleanFieldWithDefault(t,1,!1),message:n.Message.getFieldWithDefault(t,2,"")};return e&&(r.$jspbMessageInstance=t),r});proto.chat.JoinRoomResponse.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.chat.JoinRoomResponse;return proto.chat.JoinRoomResponse.deserializeBinaryFromReader(r,t)};proto.chat.JoinRoomResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){var r=t.getFieldNumber();switch(r){case 1:var s=t.readBool();e.setSuccess(s);break;case 2:var s=t.readString();e.setMessage(s);break;default:t.skipField();break}}return e};proto.chat.JoinRoomResponse.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.chat.JoinRoomResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()};proto.chat.JoinRoomResponse.serializeBinaryToWriter=function(e,t){var r=void 0;r=e.getSuccess(),r&&t.writeBool(1,r),r=e.getMessage(),r.length>0&&t.writeString(2,r)};proto.chat.JoinRoomResponse.prototype.getSuccess=function(){return n.Message.getBooleanFieldWithDefault(this,1,!1)};proto.chat.JoinRoomResponse.prototype.setSuccess=function(e){return n.Message.setProto3BooleanField(this,1,e)};proto.chat.JoinRoomResponse.prototype.getMessage=function(){return n.Message.getFieldWithDefault(this,2,"")};proto.chat.JoinRoomResponse.prototype.setMessage=function(e){return n.Message.setProto3StringField(this,2,e)};n.Message.GENERATE_TO_OBJECT&&(proto.chat.LeaveRoomRequest.prototype.toObject=function(e){return proto.chat.LeaveRoomRequest.toObject(e,this)},proto.chat.LeaveRoomRequest.toObject=function(e,t){var r={userId:n.Message.getFieldWithDefault(t,1,""),roomId:n.Message.getFieldWithDefault(t,2,"")};return e&&(r.$jspbMessageInstance=t),r});proto.chat.LeaveRoomRequest.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.chat.LeaveRoomRequest;return proto.chat.LeaveRoomRequest.deserializeBinaryFromReader(r,t)};proto.chat.LeaveRoomRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){var r=t.getFieldNumber();switch(r){case 1:var s=t.readString();e.setUserId(s);break;case 2:var s=t.readString();e.setRoomId(s);break;default:t.skipField();break}}return e};proto.chat.LeaveRoomRequest.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.chat.LeaveRoomRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()};proto.chat.LeaveRoomRequest.serializeBinaryToWriter=function(e,t){var r=void 0;r=e.getUserId(),r.length>0&&t.writeString(1,r),r=e.getRoomId(),r.length>0&&t.writeString(2,r)};proto.chat.LeaveRoomRequest.prototype.getUserId=function(){return n.Message.getFieldWithDefault(this,1,"")};proto.chat.LeaveRoomRequest.prototype.setUserId=function(e){return n.Message.setProto3StringField(this,1,e)};proto.chat.LeaveRoomRequest.prototype.getRoomId=function(){return n.Message.getFieldWithDefault(this,2,"")};proto.chat.LeaveRoomRequest.prototype.setRoomId=function(e){return n.Message.setProto3StringField(this,2,e)};n.Message.GENERATE_TO_OBJECT&&(proto.chat.LeaveRoomResponse.prototype.toObject=function(e){return proto.chat.LeaveRoomResponse.toObject(e,this)},proto.chat.LeaveRoomResponse.toObject=function(e,t){var r={success:n.Message.getBooleanFieldWithDefault(t,1,!1),message:n.Message.getFieldWithDefault(t,2,"")};return e&&(r.$jspbMessageInstance=t),r});proto.chat.LeaveRoomResponse.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.chat.LeaveRoomResponse;return proto.chat.LeaveRoomResponse.deserializeBinaryFromReader(r,t)};proto.chat.LeaveRoomResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){var r=t.getFieldNumber();switch(r){case 1:var s=t.readBool();e.setSuccess(s);break;case 2:var s=t.readString();e.setMessage(s);break;default:t.skipField();break}}return e};proto.chat.LeaveRoomResponse.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.chat.LeaveRoomResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()};proto.chat.LeaveRoomResponse.serializeBinaryToWriter=function(e,t){var r=void 0;r=e.getSuccess(),r&&t.writeBool(1,r),r=e.getMessage(),r.length>0&&t.writeString(2,r)};proto.chat.LeaveRoomResponse.prototype.getSuccess=function(){return n.Message.getBooleanFieldWithDefault(this,1,!1)};proto.chat.LeaveRoomResponse.prototype.setSuccess=function(e){return n.Message.setProto3BooleanField(this,1,e)};proto.chat.LeaveRoomResponse.prototype.getMessage=function(){return n.Message.getFieldWithDefault(this,2,"")};proto.chat.LeaveRoomResponse.prototype.setMessage=function(e){return n.Message.setProto3StringField(this,2,e)};proto.chat.MessageType={TEXT:0,IMAGE:1,FILE:2,SYSTEM:3};p.object.extend(exports,proto.chat);var st,ot;const v=((st=global.proto)==null?void 0:st.chat)||((ot=window.proto)==null?void 0:ot.chat);if(!v)throw new Error("chat_pb.js not loaded properly");const Xe=v.ChatMessage,Ot=v.GetMessagesRequest,Tt=v.GetOnlineUsersRequest,$e=v.GetOnlineUsersResponse,It=v.GetUserRequest,Ye=v.GetUserResponse,qt=v.JoinRoomRequest,He=v.JoinRoomResponse,Lt=v.LeaveRoomRequest,Ke=v.LeaveRoomResponse,Gt=v.LoginRequest,Ve=v.LoginResponse,Wt=v.RegisterRequest,Ze=v.RegisterResponse,_t=v.SendMessageRequest,Qe=v.SendMessageResponse,At=v.UpdateUserRequest,et=v.UpdateUserResponse;v.User;const x=v.MessageType;class Qr{constructor(t,r,s){this.methodDescriptorRegister=new S("/chat.UserService/Register",w.UNARY,Wt,Ze,o=>o.serializeBinary(),Ze.deserializeBinary),this.methodDescriptorLogin=new S("/chat.UserService/Login",w.UNARY,Gt,Ve,o=>o.serializeBinary(),Ve.deserializeBinary),this.methodDescriptorGetUser=new S("/chat.UserService/GetUser",w.UNARY,It,Ye,o=>o.serializeBinary(),Ye.deserializeBinary),this.methodDescriptorUpdateUser=new S("/chat.UserService/UpdateUser",w.UNARY,At,et,o=>o.serializeBinary(),et.deserializeBinary),s||(s={}),r||(r={}),s.format="text",this.client_=new Ct(s),this.hostname_=t.replace(/\/+$/,""),this.credentials_=r,this.options_=s}register(t,r,s){return s!==void 0?this.client_.rpcCall(this.hostname_+"/chat.UserService/Register",t,r||{},this.methodDescriptorRegister,s):this.client_.unaryCall(this.hostname_+"/chat.UserService/Register",t,r||{},this.methodDescriptorRegister)}login(t,r,s){return s!==void 0?this.client_.rpcCall(this.hostname_+"/chat.UserService/Login",t,r||{},this.methodDescriptorLogin,s):this.client_.unaryCall(this.hostname_+"/chat.UserService/Login",t,r||{},this.methodDescriptorLogin)}getUser(t,r,s){return s!==void 0?this.client_.rpcCall(this.hostname_+"/chat.UserService/GetUser",t,r||{},this.methodDescriptorGetUser,s):this.client_.unaryCall(this.hostname_+"/chat.UserService/GetUser",t,r||{},this.methodDescriptorGetUser)}updateUser(t,r,s){return s!==void 0?this.client_.rpcCall(this.hostname_+"/chat.UserService/UpdateUser",t,r||{},this.methodDescriptorUpdateUser,s):this.client_.unaryCall(this.hostname_+"/chat.UserService/UpdateUser",t,r||{},this.methodDescriptorUpdateUser)}}class es{constructor(t,r,s){this.methodDescriptorSendMessage=new S("/chat.ChatService/SendMessage",w.UNARY,_t,Qe,o=>o.serializeBinary(),Qe.deserializeBinary),this.methodDescriptorGetMessages=new S("/chat.ChatService/GetMessages",w.SERVER_STREAMING,Ot,Xe,o=>o.serializeBinary(),Xe.deserializeBinary),this.methodDescriptorGetOnlineUsers=new S("/chat.ChatService/GetOnlineUsers",w.UNARY,Tt,$e,o=>o.serializeBinary(),$e.deserializeBinary),this.methodDescriptorJoinRoom=new S("/chat.ChatService/JoinRoom",w.UNARY,qt,He,o=>o.serializeBinary(),He.deserializeBinary),this.methodDescriptorLeaveRoom=new S("/chat.ChatService/LeaveRoom",w.UNARY,Lt,Ke,o=>o.serializeBinary(),Ke.deserializeBinary),s||(s={}),r||(r={}),s.format="text",this.client_=new Ct(s),this.hostname_=t.replace(/\/+$/,""),this.credentials_=r,this.options_=s}sendMessage(t,r,s){return s!==void 0?this.client_.rpcCall(this.hostname_+"/chat.ChatService/SendMessage",t,r||{},this.methodDescriptorSendMessage,s):this.client_.unaryCall(this.hostname_+"/chat.ChatService/SendMessage",t,r||{},this.methodDescriptorSendMessage)}getMessages(t,r){return this.client_.serverStreaming(this.hostname_+"/chat.ChatService/GetMessages",t,r||{},this.methodDescriptorGetMessages)}getOnlineUsers(t,r,s){return s!==void 0?this.client_.rpcCall(this.hostname_+"/chat.ChatService/GetOnlineUsers",t,r||{},this.methodDescriptorGetOnlineUsers,s):this.client_.unaryCall(this.hostname_+"/chat.ChatService/GetOnlineUsers",t,r||{},this.methodDescriptorGetOnlineUsers)}joinRoom(t,r,s){return s!==void 0?this.client_.rpcCall(this.hostname_+"/chat.ChatService/JoinRoom",t,r||{},this.methodDescriptorJoinRoom,s):this.client_.unaryCall(this.hostname_+"/chat.ChatService/JoinRoom",t,r||{},this.methodDescriptorJoinRoom)}leaveRoom(t,r,s){return s!==void 0?this.client_.rpcCall(this.hostname_+"/chat.ChatService/LeaveRoom",t,r||{},this.methodDescriptorLeaveRoom,s):this.client_.unaryCall(this.hostname_+"/chat.ChatService/LeaveRoom",t,r||{},this.methodDescriptorLeaveRoom)}}const ee=new Qr("http://localhost:50051"),J=new es("http://localhost:50051");class ts{constructor(){console.log("GrpcClient initialized with real gRPC-Web")}async register(t,r,s){try{const o=new Wt;o.setUsername(t),o.setEmail(r),o.setPassword(s);const i=await new Promise((a,u)=>{ee.register(o,{},(c,h)=>{c?u(c):a(h)})});return{success:i.getSuccess(),message:i.getMessage(),user:i.getUser()?{id:i.getUser().getId(),username:i.getUser().getUsername(),email:i.getUser().getEmail(),avatar:i.getUser().getAvatar(),is_online:i.getUser().getIsOnline(),created_at:i.getUser().getCreatedAt(),updated_at:i.getUser().getUpdatedAt()}:null}}catch(o){throw console.error("gRPC register error:",o),new Error("注册失败: "+o.message)}}async login(t,r){try{const s=new Gt;s.setEmail(t),s.setPassword(r);const o=await new Promise((i,a)=>{ee.login(s,{},(u,c)=>{u?a(u):i(c)})});return{success:o.getSuccess(),message:o.getMessage(),token:o.getToken(),user:o.getUser()?{id:o.getUser().getId(),username:o.getUser().getUsername(),email:o.getUser().getEmail(),avatar:o.getUser().getAvatar(),is_online:o.getUser().getIsOnline(),created_at:o.getUser().getCreatedAt(),updated_at:o.getUser().getUpdatedAt()}:null}}catch(s){throw console.error("gRPC login error:",s),new Error("登录失败: "+s.message)}}async getUser(t){try{const r=new It;r.setUserId(t);const s=await new Promise((o,i)=>{ee.getUser(r,{},(a,u)=>{a?i(a):o(u)})});return{success:s.getSuccess(),user:s.getUser()?{id:s.getUser().getId(),username:s.getUser().getUsername(),email:s.getUser().getEmail(),avatar:s.getUser().getAvatar(),is_online:s.getUser().getIsOnline(),created_at:s.getUser().getCreatedAt(),updated_at:s.getUser().getUpdatedAt()}:null}}catch(r){throw console.error("gRPC getUser error:",r),new Error("获取用户信息失败: "+r.message)}}async updateUser(t,r,s){try{const o=new At;o.setUserId(t),o.setUsername(r),o.setAvatar(s||"");const i=await new Promise((a,u)=>{ee.updateUser(o,{},(c,h)=>{c?u(c):a(h)})});return{success:i.getSuccess(),message:i.getMessage(),user:i.getUser()?{id:i.getUser().getId(),username:i.getUser().getUsername(),email:i.getUser().getEmail(),avatar:i.getUser().getAvatar(),is_online:i.getUser().getIsOnline(),created_at:i.getUser().getCreatedAt(),updated_at:i.getUser().getUpdatedAt()}:null}}catch(o){throw console.error("gRPC updateUser error:",o),new Error("更新用户信息失败: "+o.message)}}async sendMessage(t,r,s,o="text"){try{const i=new _t;i.setUserId(t),i.setContent(r),i.setRoomId(s);let a=x.TEXT;switch(o){case"image":a=x.IMAGE;break;case"file":a=x.FILE;break;case"system":a=x.SYSTEM;break;default:a=x.TEXT}i.setMessageType(a);const u=await new Promise((c,h)=>{J.sendMessage(i,{},(l,g)=>{l?h(l):c(g)})});return{success:u.getSuccess(),message:u.getMessage(),chat_message:u.getChatMessage()?{id:u.getChatMessage().getId(),user_id:u.getChatMessage().getUserId(),username:u.getChatMessage().getUsername(),content:u.getChatMessage().getContent(),room_id:u.getChatMessage().getRoomId(),message_type:u.getChatMessage().getMessageType(),timestamp:u.getChatMessage().getTimestamp()}:null}}catch(i){throw console.error("gRPC sendMessage error:",i),new Error("发送消息失败: "+i.message)}}getMessagesStream(t,r=100,s=0){console.log("gRPC getMessagesStream called with:",{roomId:t,limit:r,beforeTimestamp:s});const o=new Ot;o.setRoomId(t),o.setLimit(r),o.setBeforeTimestamp(s);const i=J.getMessages(o,{});return{on:(a,u)=>{console.log(`gRPC stream event listener added: ${a}`),a==="data"?i.on("data",c=>{const h={id:c.getId(),user_id:c.getUserId(),username:c.getUsername(),content:c.getContent(),room_id:c.getRoomId(),message_type:c.getMessageType(),timestamp:c.getTimestamp()};u(h)}):a==="error"?i.on("error",u):a==="end"&&i.on("end",u)},cancel:()=>{console.log("gRPC stream cancelled"),i.cancel()}}}async getOnlineUsers(t){try{const r=new Tt;return r.setRoomId(t),{users:(await new Promise((o,i)=>{J.getOnlineUsers(r,{},(a,u)=>{a?i(a):o(u)})})).getUsersList().map(o=>({id:o.getId(),username:o.getUsername(),email:o.getEmail(),avatar:o.getAvatar(),is_online:o.getIsOnline(),created_at:o.getCreatedAt(),updated_at:o.getUpdatedAt()}))}}catch(r){throw console.error("gRPC getOnlineUsers error:",r),new Error("获取在线用户失败: "+r.message)}}async joinRoom(t,r){try{const s=new qt;s.setUserId(t),s.setRoomId(r);const o=await new Promise((i,a)=>{J.joinRoom(s,{},(u,c)=>{u?a(u):i(c)})});return{success:o.getSuccess(),message:o.getMessage()}}catch(s){throw console.error("gRPC joinRoom error:",s),new Error("加入房间失败: "+s.message)}}async leaveRoom(t,r){try{const s=new Lt;s.setUserId(t),s.setRoomId(r);const o=await new Promise((i,a)=>{J.leaveRoom(s,{},(u,c)=>{u?a(u):i(c)})});return{success:o.getSuccess(),message:o.getMessage()}}catch(s){throw console.error("gRPC leaveRoom error:",s),new Error("离开房间失败: "+s.message)}}}const b=new ts,_=Be("user",()=>{const e=F(null),t=F(null),r=F(!1),s=jt(()=>!!t.value&&!!e.value),o=g=>{e.value=g,localStorage.setItem("userInfo",JSON.stringify(g))},i=g=>{t.value=g,localStorage.setItem("token",g)},a=()=>{e.value=null,t.value=null,localStorage.removeItem("userInfo"),localStorage.removeItem("token")};return{user:e,token:t,loading:r,isAuthenticated:s,setUser:o,setToken:i,clearUser:a,login:async(g,y)=>{r.value=!0;try{const R=await b.login(g,y);return console.log("gRPC登录响应:",R),R.success?(o(R.user),i(R.token),console.log("用户信息已设置:",e.value),console.log("Token已设置:",t.value),{success:!0,message:R.message}):{success:!1,message:R.message}}catch(R){return console.error("gRPC登录错误:",R),{success:!1,message:R.message||"登录失败，请重试"}}finally{r.value=!1}},register:async(g,y,R)=>{r.value=!0;try{const d=await b.register(g,y,R);return d.success?{success:!0,message:d.message}:{success:!1,message:d.message}}catch(d){return{success:!1,message:d.message||"注册失败，请重试"}}finally{r.value=!1}},logout:()=>{a()},updateProfile:async(g,y)=>{r.value=!0;try{const R=await b.updateUser(e.value.id,g,y);return R.success?(o(R.user),{success:!0,message:R.message}):{success:!1,message:R.message}}catch(R){return{success:!1,message:R.message||"更新失败，请重试"}}finally{r.value=!1}}}}),tt=Be("chat",()=>{const e=F([]),t=F([]),r=F("general"),s=F(!1),o=d=>{console.log("添加消息到聊天列表:",d);const f={...d,id:d.id||`temp_${Date.now()}_${Math.random()}`,timestamp:d.timestamp?ue(d.timestamp*1e3).format("HH:mm:ss"):ue().format("HH:mm:ss")};console.log("格式化后的消息:",f),e.value.push(f),console.log("当前消息列表:",e.value)},i=d=>{console.log("移除临时消息:",d);const f=e.value.findIndex(L=>L.content===d&&L.is_temp===!0);f!==-1&&(e.value.splice(f,1),console.log("临时消息已移除"))},a=d=>{console.log("从API获取的消息列表（已按时间正序排列）:",d.map(f=>({content:f.content,timestamp:f.timestamp,username:f.username}))),e.value=d.map(f=>({...f,timestamp:ue(f.timestamp*1e3).format("HH:mm:ss")})),console.log("最终显示的消息列表:",e.value.map(f=>({content:f.content,timestamp:f.timestamp,username:f.username})))},u=d=>{t.value=d},c=d=>{r.value=d},h=async(d,f="text")=>{try{return{success:!0}}catch(L){return{success:!1,message:L.message||"发送失败，请重试"}}},l=async()=>{s.value=!0;try{return console.log("正在通过gRPC加载房间消息:",r.value),{success:!0}}catch(d){return console.error("加载消息失败:",d),{success:!1,message:d.message||"加载消息失败"}}finally{s.value=!1}},g=async()=>{try{console.log("通过gRPC获取在线用户，房间ID:",r.value);const d=await b.getOnlineUsers(r.value);return console.log("gRPC在线用户响应:",d),u(d.users||[]),console.log("设置后的在线用户:",t.value),{success:!0}}catch(d){return console.error("获取在线用户失败:",d),{success:!1,message:d.message||"获取在线用户失败"}}};return{messages:e,onlineUsers:t,currentRoom:r,loading:s,addMessage:o,removeTempMessage:i,setMessages:a,setOnlineUsers:u,setCurrentRoom:c,sendMessage:h,loadMessages:l,getOnlineUsers:g,joinRoom:async d=>{try{return e.value=[],c(d),await l(),await g(),{success:!0}}catch(f){return{success:!1,message:f.message||"加入房间失败"}}},leaveRoom:async d=>{try{return{success:!0,message:"成功离开房间"}}catch(f){return{success:!1,message:f.message||"离开房间失败"}}}}}),rs=Be("websocket",()=>{const e=F(null),t=F(!1),r=F(!1),s=async()=>{if(!(r.value||t.value||!_().isAuthenticated)){r.value=!0;try{console.log("Connecting to gRPC service..."),t.value=!0,r.value=!1,console.log("gRPC service connected"),await a("general")}catch(g){r.value=!1,console.error("Failed to connect gRPC service:",g)}}},o=()=>{e.value&&(e.value.cancel(),e.value=null),t.value=!1,r.value=!1},i=async l=>{if(t.value)try{await b.sendMessage(l.user_id,l.content,l.room_id,l.message_type||"text")}catch(g){console.error("Failed to send gRPC message:",g)}},a=async l=>{const g=_();if(g.user)try{await b.joinRoom(g.user.id,l),console.log(`Joined room ${l} via gRPC`)}catch(y){console.error("Failed to join room via gRPC:",y)}};return{messageStream:e,connected:t,connecting:r,connect:s,disconnect:o,sendMessage:i,joinRoom:a,leaveRoom:async l=>{const g=_();if(g.user)try{await b.leaveRoom(g.user.id,l),console.log(`Left room ${l} via gRPC`)}catch(y){console.error("Failed to leave room via gRPC:",y)}},sendChatMessage:async(l,g="text")=>{const y=_(),R=tt();if(y.user){console.log("发送gRPC聊天消息:",{room_id:R.currentRoom,user_id:y.user.id,content:l,message_type:g});try{await b.sendMessage(y.user.id,l,R.currentRoom,g)}catch(d){console.error("Failed to send chat message via gRPC:",d)}}},handleMessage:l=>{const g=tt();console.log("收到gRPC消息:",l),l.id&&l.user_id&&l.content&&(console.log("处理gRPC聊天消息:",l),g.removeTempMessage(l.content),g.addMessage({id:l.id,user_id:l.user_id,username:l.username,content:l.content,room_id:l.room_id,message_type:l.message_type,timestamp:l.timestamp}))}}});const ss={id:"app"},os={__name:"App",setup(e){const t=_(),r=rs();return kt(async()=>{const s=localStorage.getItem("token"),o=localStorage.getItem("userInfo");if(s&&o)try{t.setUser(JSON.parse(o)),t.setToken(s),await r.connect()}catch(i){console.error("Failed to restore user session:",i),localStorage.removeItem("token"),localStorage.removeItem("userInfo")}}),(s,o)=>{const i=Nt("router-view");return xt(),Jt("div",ss,[Xt(i)])}}},ns="modulepreload",is=function(e){return"/"+e},rt={},he=function(t,r,s){if(!r||r.length===0)return t();const o=document.getElementsByTagName("link");return Promise.all(r.map(i=>{if(i=is(i),i in rt)return;rt[i]=!0;const a=i.endsWith(".css"),u=a?'[rel="stylesheet"]':"";if(!!s)for(let l=o.length-1;l>=0;l--){const g=o[l];if(g.href===i&&(!a||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${u}`))return;const h=document.createElement("link");if(h.rel=a?"stylesheet":ns,a||(h.as="script",h.crossOrigin=""),h.href=i,document.head.appendChild(h),a)return new Promise((l,g)=>{h.addEventListener("load",l),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i})},as=[{path:"/",redirect:"/login"},{path:"/login",name:"Login",component:()=>he(()=>import("./Login-1676b940.js"),["assets/Login-1676b940.js","assets/vendor-0413c596.js","assets/_plugin-vue_export-helper-c27b6911.js","assets/element-a74229b3.js","assets/Login-9de49486.css"]),meta:{requiresGuest:!0}},{path:"/register",name:"Register",component:()=>he(()=>import("./Register-c2c1a0fe.js"),["assets/Register-c2c1a0fe.js","assets/vendor-0413c596.js","assets/_plugin-vue_export-helper-c27b6911.js","assets/element-a74229b3.js","assets/Register-3fd3ab80.css"]),meta:{requiresGuest:!0}},{path:"/chat",name:"Chat",component:()=>he(()=>import("./Chat-b090aa7a.js"),["assets/Chat-b090aa7a.js","assets/vendor-0413c596.js","assets/element-a74229b3.js","assets/_plugin-vue_export-helper-c27b6911.js","assets/Chat-aae6bc69.css"]),meta:{requiresAuth:!0}}],zt=$t({history:Yt(),routes:as});zt.beforeEach((e,t,r)=>{const s=_(),o=s.isAuthenticated;console.log("路由守卫:",{to:e.path,from:t.path,isAuthenticated:o,user:s.user,token:s.token}),e.meta.requiresAuth&&!o?(console.log("需要认证，重定向到登录页"),r("/login")):e.meta.requiresGuest&&o?(console.log("已认证，重定向到聊天页"),r("/chat")):(console.log("正常导航"),r())});const Z=Ht(os);for(const[e,t]of Object.entries(Zt))Z.component(e,t);Z.use(Kt());Z.use(zt);Z.use(Qt,{locale:er});Z.mount("#app");export{tt as a,rs as b,_ as u};
